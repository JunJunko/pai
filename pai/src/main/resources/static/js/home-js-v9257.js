/*
 * @module report
 * @author kael, chriscai
 * @date @DATE
 * Copyright (c) 2014 kael, chriscai
 * Licensed under the MIT license.
 */
var BJ_REPORT=(function(global){if(global.BJ_REPORT)return global.BJ_REPORT;var _log_list=[];var _log_map={};var _config={id:0,uin:0,url:"",offline_url:"",offline_auto_url:"",ext:null,level:4,ignore:[],random:1,delay:1000,submit:null,repeat:5,offlineLog:false,offlineLogExp:5,offlineLogAuto:false};var Offline_DB={db:null,ready:function(callback){var self=this;if(!window.indexedDB||!_config.offlineLog){_config.offlineLog=false;return callback();}
if(this.db){setTimeout(function(){callback(null,self);},0);return;}
var version=1;var request=window.indexedDB.open("badjs",version);if(!request){_config.offlineLog=false;return callback();}
request.onerror=function(e){callback(e);_config.offlineLog=false;console.log("indexdb request error");return true;};request.onsuccess=function(e){self.db=e.target.result;setTimeout(function(){callback(null,self);},500);};request.onupgradeneeded=function(e){var db=e.target.result;if(!db.objectStoreNames.contains('logs')){db.createObjectStore('logs',{autoIncrement:true});}};},insertToDB:function(log){var store=this.getStore();store.add(log);},addLog:function(log){if(!this.db){return;}
this.insertToDB(log);},addLogs:function(logs){if(!this.db){return;}
for(var i=0;i<logs.length;i++){this.addLog(logs[i]);}},getLogs:function(opt,callback){if(!this.db){return;}
var store=this.getStore();var request=store.openCursor();var result=[];request.onsuccess=function(event){var cursor=event.target.result;if(cursor){if(cursor.value.time>=opt.start&&cursor.value.time<=opt.end&&cursor.value.id==opt.id&&cursor.value.uin==opt.uin){result.push(cursor.value);}
cursor["continue"]();}else{callback(null,result);}};request.onerror=function(e){callback(e);return true;};},clearDB:function(daysToMaintain){if(!this.db){return;}
var store=this.getStore();if(!daysToMaintain){store.clear();return;}
var range=(Date.now()-(daysToMaintain||2)*24*3600*1000);var request=store.openCursor();request.onsuccess=function(event){var cursor=event.target.result;if(cursor&&(cursor.value.time<range||!cursor.value.time)){store["delete"](cursor.primaryKey);cursor["continue"]();}};},getStore:function(){var transaction=this.db.transaction("logs",'readwrite');return transaction.objectStore("logs");}};var T={isOBJByType:function(o,type){return Object.prototype.toString.call(o)==="[object "+(type||"Object")+"]";},isOBJ:function(obj){var type=typeof obj;return type==="object"&&!!obj;},isEmpty:function(obj){if(obj===null)return true;if(T.isOBJByType(obj,"Number")){return false;}
return!obj;},extend:function(src,source){for(var key in source){src[key]=source[key];}
return src;},processError:function(errObj){try{if(errObj.stack){var url=errObj.stack.match("https?://[^\n]+");url=url?url[0]:"";var rowCols=url.match(":(\\d+):(\\d+)");if(!rowCols){rowCols=[0,0,0];}
var stack=T.processStackMsg(errObj);return{msg:stack,rowNum:rowCols[1],colNum:rowCols[2],target:url.replace(rowCols[0],""),_orgMsg:errObj.toString()};}else{if(errObj.name&&errObj.message&&errObj.description){return{msg:JSON.stringify(errObj)};}
return errObj;}}catch(err){return errObj;}},processStackMsg:function(error){var stack=error.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,"");var msg=error.toString();if(stack.indexOf(msg)<0){stack=msg+"@"+stack;}
return stack;},isRepeat:function(error){if(!T.isOBJ(error))return true;var msg=error.msg;var times=_log_map[msg]=(parseInt(_log_map[msg],10)||0)+1;return times>_config.repeat;}};var orgError=global.onerror;global.onerror=function(msg,url,line,col,error){var newMsg=msg;if(error&&error.stack){newMsg=T.processStackMsg(error);}
if(T.isOBJByType(newMsg,"Event")){newMsg+=newMsg.type?("--"+newMsg.type+"--"+(newMsg.target?(newMsg.target.tagName+"::"+newMsg.target.src):"")):"";}
report.push({msg:newMsg,target:url,rowNum:line,colNum:col,_orgMsg:msg});_process_log();orgError&&orgError.apply(global,arguments);};var _report_log_tostring=function(error,index){var param=[];var params=[];var stringify=[];if(T.isOBJ(error)){error.level=error.level||_config.level;for(var key in error){var value=error[key];if(!T.isEmpty(value)){if(T.isOBJ(value)){try{value=JSON.stringify(value);}catch(err){value="[BJ_REPORT detect value stringify error] "+err.toString();}}
stringify.push(key+":"+value);param.push(key+"="+encodeURIComponent(value));params.push(key+"["+index+"]="+encodeURIComponent(value));}}}
return[params.join("&"),stringify.join(","),param.join("&")];};var _offline_buffer=[];var _save2Offline=function(key,msgObj){msgObj=T.extend({id:_config.id,uin:_config.uin,time:new Date-0},msgObj);if(Offline_DB.db){Offline_DB.addLog(msgObj);return;}
if(!Offline_DB.db&&!_offline_buffer.length){Offline_DB.ready(function(err,DB){if(DB){if(_offline_buffer.length){DB.addLogs(_offline_buffer);_offline_buffer=[];}}});}
_offline_buffer.push(msgObj);};var _autoReportOffline=function(){var script=document.createElement("script");script.src=_config.offline_auto_url||_config.url.replace(/badjs$/,"offlineAuto")+"?id="+_config.id+"&uin="+_config.uin;window._badjsOfflineAuto=function(isReport){if(isReport){BJ_REPORT.reportOfflineLog();}};document.head.appendChild(script);};var submit_log_list=[];var comboTimeout=0;var _submit_log=function(){clearTimeout(comboTimeout);if(!submit_log_list.length){return;}
var url=_config._reportUrl+submit_log_list.join("&")+"&count="+submit_log_list.length+"&_t="+(+new Date);if(_config.submit){_config.submit(url);}else{var _img=new Image();_img.src=url;}
comboTimeout=0;submit_log_list=[];};var _process_log=function(isReportNow){if(!_config._reportUrl)return;var randomIgnore=Math.random()>=_config.random;while(_log_list.length){var isIgnore=false;var report_log=_log_list.shift();report_log.msg=(report_log.msg+""||"").substr(0,500);if(T.isRepeat(report_log))continue;var log_str=_report_log_tostring(report_log,submit_log_list.length);if(T.isOBJByType(_config.ignore,"Array")){for(var i=0,l=_config.ignore.length;i<l;i++){var rule=_config.ignore[i];if((T.isOBJByType(rule,"RegExp")&&rule.test(log_str[1]))||(T.isOBJByType(rule,"Function")&&rule(report_log,log_str[1]))){isIgnore=true;break;}}}
if(!isIgnore){_config.offlineLog&&_save2Offline("badjs_"+_config.id+_config.uin,report_log);if(!randomIgnore&&report_log.level!=20){submit_log_list.push(log_str[0]);_config.onReport&&(_config.onReport(_config.id,report_log));}}}
if(isReportNow){_submit_log();}else if(!comboTimeout){comboTimeout=setTimeout(_submit_log,_config.delay);}};var report=global.BJ_REPORT={push:function(msg){var data=T.isOBJ(msg)?T.processError(msg):{msg:msg};if(_config.ext&&!data.ext){data.ext=_config.ext;}
if(!data.from){data.from=location.href;}
if(data._orgMsg){var _orgMsg=data._orgMsg;delete data._orgMsg;data.level=2;var newData=T.extend({},data);newData.level=4;newData.msg=_orgMsg;_log_list.push(data);_log_list.push(newData);}else{_log_list.push(data);}
_process_log();return report;},report:function(msg,isReportNow){msg&&report.push(msg);isReportNow&&_process_log(true);return report;},info:function(msg){if(!msg){return report;}
if(T.isOBJ(msg)){msg.level=2;}else{msg={msg:msg,level:2};}
report.push(msg);return report;},debug:function(msg){if(!msg){return report;}
if(T.isOBJ(msg)){msg.level=1;}else{msg={msg:msg,level:1};}
report.push(msg);return report;},reportOfflineLog:function(){if(!window.indexedDB){BJ_REPORT.info("unsupport offlineLog");return;}
Offline_DB.ready(function(err,DB){if(!DB){return;}
var startDate=new Date-0-_config.offlineLogExp*24*3600*1000;var endDate=new Date-0;DB.getLogs({start:startDate,end:endDate,id:_config.id,uin:_config.uin},function(err,result){var iframe=document.createElement("iframe");iframe.name="badjs_offline_"+(new Date-0);iframe.frameborder=0;iframe.height=0;iframe.width=0;iframe.src="javascript:false;";iframe.onload=function(){var form=document.createElement("form");form.style.display="none";form.target=iframe.name;form.method="POST";form.action=_config.offline_url||_config.url.replace(/badjs$/,"offlineLog");form.enctype.method='multipart/form-data';var input=document.createElement("input");input.style.display="none";input.type="hidden";input.name="offline_log";input.value=JSON.stringify({logs:result,userAgent:navigator.userAgent,startDate:startDate,endDate:endDate,id:_config.id,uin:_config.uin});iframe.contentDocument.body.appendChild(form);form.appendChild(input);form.submit();setTimeout(function(){document.body.removeChild(iframe);},10000);iframe.onload=null;};document.body.appendChild(iframe);});});},offlineLog:function(msg){if(!msg){return report;}
if(T.isOBJ(msg)){msg.level=20;}else{msg={msg:msg,level:20};}
report.push(msg);return report;},init:function(config){if(T.isOBJ(config)){for(var key in config){_config[key]=config[key];}}
var id=parseInt(_config.id,10);if(id){if(/qq\.com$/gi.test(location.hostname)){if(!_config.url){_config.url="//badjs2.qq.com/badjs";}
if(!_config.uin){_config.uin=parseInt((document.cookie.match(/\buin=\D+(\d+)/)||[])[1],10);}}
_config._reportUrl=(_config.url||"/badjs")+"?id="+id+"&uin="+_config.uin+"&";}
if(_log_list.length){_process_log();}
if(!Offline_DB._initing){Offline_DB._initing=true;Offline_DB.ready(function(err,DB){if(DB){setTimeout(function(){DB.clearDB(_config.offlineLogExp);setTimeout(function(){_config.offlineLogAuto&&_autoReportOffline();},5000);},1000);}});}
return report;},__onerror__:global.onerror};return report;}(window));if(typeof module!=="undefined"){module.exports=BJ_REPORT;};(function(global){if(!global.BJ_REPORT){console.error("please load bg-report first");return;}
var _onthrow=function(errObj){global.BJ_REPORT.push(errObj);};var tryJs={};global.BJ_REPORT.tryJs=function(throwCb){throwCb&&(_onthrow=throwCb);return tryJs;};var _merge=function(org,obj){for(var key in obj){org[key]=obj[key];}};var _isFunction=function(foo){return typeof foo==="function";};var timeoutkey;var cat=function(foo,args){return function(){try{return foo.apply(this,args||arguments);}catch(error){_onthrow(error);if(error.stack&&console&&console.error){console.error("[BJ-REPORT]",error.stack);}
if(!timeoutkey){var orgOnerror=global.onerror;global.onerror=function(){};timeoutkey=setTimeout(function(){global.onerror=orgOnerror;global.onerror=orgOnerror;timeoutkey=null;},50);}
throw error;}};};var catArgs=function(foo){return function(){var arg,args=[];for(var i=0,l=arguments.length;i<l;i++){arg=arguments[i];_isFunction(arg)&&(arg=cat(arg));args.push(arg);}
return foo.apply(this,args);};};var catTimeout=function(foo){return function(cb,timeout){if(typeof cb==="string"){try{cb=new Function(cb);}catch(err){throw err;}}
var args=[].slice.call(arguments,2);cb=cat(cb,args.length&&args);return foo(cb,timeout);};};var makeArgsTry=function(foo,self){return function(){var arg,tmp,args=[];for(var i=0,l=arguments.length;i<l;i++){arg=arguments[i];if(_isFunction(arg)){if(arg.tryWrap){arg=arg.tryWrap;}else{tmp=cat(arg);arg.tryWrap=tmp;arg=tmp;}}
args.push(arg);}
return foo.apply(self||this,args);};};var makeObjTry=function(obj){var key,value;for(key in obj){value=obj[key];if(_isFunction(value)){obj[key]=cat(value);}}
var _err=obj['error'];obj['error']=function(jqXHR,textStatus,errorThrown){BJ_REPORT.report([obj.url,jqXHR.status,'('+errorThrown+')'].join(' '));_isFunction(_err)&&_ajax.call(global.$,jqXHR,textStatus,errorThrown);};return obj;};tryJs.spyJquery=function(){var _$=global.$;if(!_$||!_$.event){return tryJs;}
var _add,_remove;if(_$.zepto){_add=_$.fn.on,_remove=_$.fn.off;_$.fn.on=makeArgsTry(_add);_$.fn.off=function(){var arg,args=[];for(var i=0,l=arguments.length;i<l;i++){arg=arguments[i];_isFunction(arg)&&arg.tryWrap&&(arg=arg.tryWrap);args.push(arg);}
return _remove.apply(this,args);};}else if(window.jQuery){_add=_$.event.add,_remove=_$.event.remove;_$.event.add=makeArgsTry(_add);_$.event.remove=function(){var arg,args=[];for(var i=0,l=arguments.length;i<l;i++){arg=arguments[i];_isFunction(arg)&&arg.tryWrap&&(arg=arg.tryWrap);args.push(arg);}
return _remove.apply(this,args);};}
var _ajax=_$.ajax;if(_ajax){_$.ajax=function(url,setting){if(!setting){setting=url;url=undefined;}
makeObjTry(setting);if(url)return _ajax.call(_$,url,setting);return _ajax.call(_$,setting);};}
return tryJs;};tryJs.spyModules=function(){var _require=global.require,_define=global.define;if(_define&&_define.amd&&_require){global.require=catArgs(_require);_merge(global.require,_require);global.define=catArgs(_define);_merge(global.define,_define);}
if(global.seajs&&_define){global.define=function(){var arg,args=[];for(var i=0,l=arguments.length;i<l;i++){arg=arguments[i];if(_isFunction(arg)){arg=cat(arg);arg.toString=(function(orgArg){return function(){return orgArg.toString();};}(arguments[i]));}
args.push(arg);}
return _define.apply(this,args);};global.seajs.use=catArgs(global.seajs.use);_merge(global.define,_define);}
return tryJs;};tryJs.spySystem=function(){global.setTimeout=catTimeout(global.setTimeout);global.setInterval=catTimeout(global.setInterval);return tryJs;};tryJs.spyCustom=function(obj){if(_isFunction(obj)){return cat(obj);}else{return makeObjTry(obj);}};tryJs.spyAll=function(){tryJs.spyJquery().spyModules().spySystem();return tryJs;};}(window));(function(global){var whiteList={"9.fanli.com":1,"f.fanli.com":1,"finder.fanli.com":1,"shzyfl.fanli.com":1,"www.shzyfl.cn":1,"cx.fanli.com":1,"gongyi.fanli.com":1,"pb.shzyfl.cn":1,"haitao.fanli.com":1,"help.fanli.com":1,"www.fanli.com":1,"huodong.fanli.com":1,"fenmi.fanli.com":1,"www.zyxx11.com":1,"fun.fanli.com":1,"m.fanli.com":1,"movie.fanli.com":1,"passport.fanli.com":1,"shop.fanli.com":1,"super.fanli.com":1,"taobao.fanli.com":1,"travel.fanli.com":1,"zhide.fanli.com":1};if(!BJ_REPORT){return;}
var host=global.location.host,reportUrl='//eagle.fanli.com/badjs';if(!whiteList[host]){return;}
BJ_REPORT.init({id:1,url:reportUrl,random:0.01,repeat:1});BJ_REPORT.tryJs().spyAll();})(window);;;(function($){$(window).on("load.TIMING",function(){if(typeof performance=="undefined"||typeof JSON=="undefined"){return;}
var timing=performance.timing;if(!timing){return;}
var timingData={readyStart:timing.fetchStart-timing.navigationStart,redirectTime:timing.redirectEnd-timing.redirectStart,appcacheTime:timing.domainLookupStart-timing.fetchStart,unloadEventTime:timing.unloadEventEnd-timing.unloadEventStart,lookupDomainTime:timing.domainLookupEnd-timing.domainLookupStart,connectTime:timing.connectEnd-timing.connectStart,requestTime:timing.responseEnd-timing.requestStart,initDomTreeTime:timing.domInteractive-timing.responseEnd,domReadyTime:timing.domComplete-timing.domInteractive,loadEventTime:timing.loadEventEnd-timing.loadEventStart,loadTime:timing.loadEventEnd-timing.navigationStart};var postData=$.extend({host:location.href},timing);delete postData.toJSON;if((parseInt(Math.random()*(5000000-1000))+1000)%1000==777){$.getJSON("//fun.fanli.com/client/homepage/performance?report={0}&jsoncallback=?".format(JSON.stringify(postData)));}});}(jQuery));;var CURRENT_PROTOCOL=location.protocol;(function(exports){Function.prototype.method=function(name,fn){if(typeof this.prototype[name]=="undefined")this.prototype[name]=fn;};!String.prototype.trim&&String.method("trim",function(){return this.replace(/^\s+|\s+$/g,'');});!Function.prototype.bind&&Function.method("bind",function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;});String.method("format",function(){for(var s=this,i=0;i<arguments.length;++i){s=s.replace(new RegExp("\\{"+i+"\\}","g"),arguments[i]);}
return s;});String.method("setCookie",function(value,expiryDays,domain,path,secure){if(this.length==0){return;}
var builder=[this,"=",escape(value)];if(expiryDays){var date=new Date();date.setTime(date.getTime()+(expiryDays*86400000));builder.push(";expires=");builder.push(date.toUTCString());}
if(domain){builder.push(";domain=");builder.push(domain);}
if(path){builder.push(";path=");builder.push(path);}
if(secure){builder.push(";secure");}
document.cookie=builder.join("");});String.method("getCookie",function(){if(this.length==0){return'';}
var re=new RegExp('\\b'+this+'\\s*=\\s*([^;]*)','i');var match=re.exec(document.cookie);return(match&&match.length>1?unescape(match[1]):'');});String.method("delCookie",function(domain,path){document.cookie=this+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+
(domain?"; domain="+domain:"")+
(path?"; path="+path:"");});function StringBuilder(){this.strings=new Array();}
StringBuilder.prototype.append=function(str){this.strings.push(str);return this;};StringBuilder.prototype.toString=function(){return this.strings.join("");};var GeneralRegs={alipay:/^(([a-zA-Z0-9])+([a-zA-Z0-9_\.\-])*\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4}))|(0{0,1}1[3456789]{1}[0-9]{9})$/ig,bankaccount:/^([a-zA-Z0-9]|-)+$/ig,blank:/^\s*$/,cellphone:/^0{0,1}1[3456789]{1}[0-9]{9}$/ig,email:/^([a-zA-Z0-9])+([a-zA-Z0-9_\.\-])*\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})$/ig,icard:/^(\d{18}|\d{15}|\d{17}x)$/ig,ihkcard:/^[a-z0-9]{1}\d{6,7}[a-z0-9]{1}$/ig,itwcard:/^[a-z]{1}\d{8,}$/ig,uname:/^[\u4e00-\u9fa5a-zA-Z\s]+$/ig,url:/^http(s)?:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/ig,vercode:/^\d{6}$/};var FLNS={"register":function(){var a=arguments,o=null,i,j,d,rt;for(i=0;i<a.length;++i){d=a[i].split(".");rt=d[0];if(typeof window[rt]=="undefined"){window[rt]={add:function(k,v){if(!this[k]){this[k]=v;}
return this;}};}
o=window[rt];for(j=1;j<d.length;++j){o[d[j]]=o[d[j]]||{};o=o[d[j]];o.add=function(k,v){if(!this[k]){this[k]=v;}return this;};}}
return o;}};var InputValidation={"isNumber":function(intArg){return Object.prototype.toString.call(intArg)==="[object Number]";},"isEmail":function(emailStr){GeneralRegs.email.lastIndex=0;return GeneralRegs.email.test(emailStr);},"isName":function(nameStr){GeneralRegs.uname.lastIndex=0;return GeneralRegs.uname.test(nameStr);},"isUrl":function(urlStr){GeneralRegs.url.lastIndex=0;return GeneralRegs.url.test(urlStr);},"isPhone":function(phoneArg){GeneralRegs.cellphone.lastIndex=0;return GeneralRegs.cellphone.test(phoneArg);},"isICard":function(icard){return /^(?:(?:\d{18})|(?:\d{15})|(?:\d{17}x)|(?:[a-z0-9]{1}\d{6,7}[a-z0-9]{1})|(?:[a-z]{1}\d{8,}))$/ig.test(icard);}};var GeneralValidation={"isIe":function(){return/*@cc_on !@*/false;},"isIe6":function(){return!-[1,]&&!window.XMLHttpRequest;}};var GrenralEscape={"escapeRegExp":function(text){return text.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");},"escapeHTML":function(value){return value.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}};exports.StringBuilder=StringBuilder;exports.InputValidation=InputValidation;exports.GeneralValidation=GeneralValidation;exports.GeneralRegs=GeneralRegs;exports.GrenralEscape=GrenralEscape;exports.FLNS=FLNS;}(this));(function($){$.extend(FLNS.register("Fanli"),{"Class":function(parent){var klass=function(){this.init.apply(this,arguments);};if(parent){var subclass=function(){};subclass.prototype=parent.prototype;klass.prototype=new subclass();}
klass.prototype.init=function(){};klass.fn=klass.prototype;klass.fn.parent=klass;klass.extend=function(obj){var extended=obj.extended;for(var i in obj){klass[i]=obj[i];}
if(extended)extended(klass);};klass.inculde=function(obj){var included=obj.included;for(var i in obj){klass.fn[i]=obj[i];}
if(included)included(klass);};klass.proxy=function(func){var self=this;return(function(){return func.apply(self,arguments);});};klass.fn.proxy=klass.proxy;return klass;}});$.extend(FLNS.register("Fanli.Utility"),{"random":function(n){var uid=Math.random().toString(16).substr(2,n);while(uid.length<n){uid=Math.random().toString(16).substr(2,n);}
return uid;},"guid":function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);}).toUpperCase();},"staticTimeStamp":function(t){var getTime=new Date().getTime();var returnts=parseInt(getTime/300000);var currentScriptPath=$('link[rel=stylesheet]').eq(0).attr('href');if(t){returnts=parseInt(getTime/(60*1000*t));}
else if(typeof(currentScriptPath)!=="undefined"){var timeStampArr=currentScriptPath.match(/^.*[\?\&](\d+\_\d+){1}$/i);if(timeStampArr){returnts=timeStampArr[1];}}
return returnts;},"requirejs":function(jsArr,callback){var v=parseInt(new Date().getTime()/300000);if(!callback){callback=$.noop;}
$.tools=$.tools||{};var jsListConfig={'overlay':{isload:$.tools.overlay,jsUrl:"//static2.51fanli.net/common/libs/tools/overlay.min.js"},'expose':{isload:$.tools.expose,jsUrl:"//static2.51fanli.net/common/libs/tools/expose.min.js"},'light':{isload:$.light,jsUrl:"//static2.51fanli.net/static/?f=passport/js/light/createpopup.js"},'easing':{isload:$.easing["easeOutBack"],jsUrl:"//static2.51fanli.net/common/plugins/easing/jquery.easing-min.js"},'switchable':{isload:$.fn.switchable,jsUrl:"//static2.51fanli.net/common/plugins/switchable/jquery.switchable-min.js"}};var loadJs=(function(){var arr=[];$.each(jsArr,function(i,item){if(!jsListConfig[item]){return true;}
var jsObj=jsListConfig[item];if(!jsObj['isload']){var connect=/\?/.test(jsObj['jsUrl'])?'&':'?';var url=jsObj['jsUrl'];if(url.indexOf('/common/plugins/')>-1){arr.push(url);}
else{arr.push(url+connect+"v={0}".format(v));}}});return arr;})();loadJs.length>0?head&&head.load(loadJs,callback):callback();},"isLogin":"prouserid".getCookie()>0,"rootDomain":(function(){var tryExecLocation=/^.*?(\.(?:51)?fanli\.com)$/ig.exec(location.hostname);var rootDomain=".fanli.com";if(tryExecLocation){rootDomain=tryExecLocation[1];}
return rootDomain;}()),"currentDomain":document.domain});})(jQuery);(function(FPO){var $origin=$({});FPO.add("subscribe",function(){$origin.on.apply($origin,arguments);});FPO.add("unsubscribe",function(){$origin.off.apply($origin,arguments);});FPO.add("publish",function(){$origin.trigger.apply($origin,$.makeArray(arguments));});}(FLNS.register("Fanli.Pattern.Observer")));(function(){try{document.execCommand('BackgroundImageCache',false,true);}
catch(err){}})();(function($){var jsonpid=0;$.extend({"getScript":function(url,callback){return $.ajax({url:url,cache:true,dataType:"script"}).done(callback);},"getCacheJSONP":function(url,data,callback,isFixed){var linkTs=$('link[rel="stylesheet"]').attr("href").split("?")[1];var lastPrm=arguments[arguments.length-1];var isFixed=$.isFunction(lastPrm)?isFixed=true:isFixed=lastPrm;var ts=(typeof linkTs!="undefined"&&isFixed)?linkTs:"83088605"+"_"+parseInt(new Date().getTime()/300000);if($.isFunction(data)){callback=data;data=undefined;}
return $.ajax({type:"GET",url:url,cache:true,data:data,jsonpCallback:"jQuery"+ts+(++jsonpid),success:callback,dataType:"jsonp"});}});}(jQuery));(function($){if(!'FirstUrl'.getCookie()){var ref=(!!document.referrer&&document.referrer.indexOf('fanli.com')<0)?document.referrer:'//www{0}/'.format(Fanli.Utility.rootDomain);'FirstUrl'.setCookie(ref,'',Fanli.Utility.rootDomain,'/');}
if(!'LandingUrl'.getCookie()){'LandingUrl'.setCookie(window.location.href,'',Fanli.Utility.rootDomain,'/');}
$(document).on('click','a',function(){var $this=$(this);var url=$this.attr('href')||'';var re=/&v=(\d+)/gi;if(url.indexOf('fun.51fanli.com/goshop')!=-1||url.indexOf('fun.fanli.com/goshop')!=-1){if(url.indexOf('v=')==-1){url=url+'&v='+new Date().getTime();}
else{url=url.replace(re,'&v='+new Date().getTime());}
$this.attr('href',url);}});})(jQuery);function open53kf(){$.getJSON('//fun{0}/client/homepage/monitor?title=kefu&jsoncallback=?'.format(Fanli.Utility.rootDomain));var userId='prouserid'.getCookie();var params="&device=pc&entry=pc&entry_name={0}&custid={1}".format(encodeURIComponent("pc客户"),userId);window.open('http://fanli.faqrobot.cn/robot/chat2.html?jid=61&sysNum=1476067342641247{0}'.format(params),'_blank');return false;}
function addFavorite(obj,msg){var url=obj.rev||window.location.href,title=obj.title||document.title;try{if(window.sidebar){window.sidebar.addPanel(title,url,'');}
else{if(window.opera&&window.print){obj.setAttribute('rel','sidebar');obj.setAttribute('href',url);obj.click();}
else{window.external.AddFavorite(url,title);}}}
catch(e){alert(msg?msg:'加入收藏失败，请使用Ctrl+D进行添加');}
return false;}
(function($){FLNS.register("taobaoRate");FLNS.taobaoRate=(function(){var rate=0.45;var rateArr=[{"st":[2007,0,1,0,0,0,0],"ed":[2013,8,27,23,59,59,999],"rate":0.45},{"st":[2013,8,28,0,0,0,0],"ed":[2013,10,1,23,59,59,999],"rate":0.36},{"st":[2013,10,2,0,0,0,0],"ed":[2099,11,31,23,59,59,999],"rate":0.45}];var nowTime=new Date();function getT(date){return new Date(date[0],date[1],date[2],date[3],date[4],date[5],date[6]);}
for(var i=0;i<rateArr.length;i++){if(nowTime>=getT(rateArr[i]["st"])&&nowTime<=getT(rateArr[i]["ed"])){rate=rateArr[i]["rate"];break;}}
return rate;}());FLNS.register("UserBenifit");UserBenifit.add("calculate",function(priceJSON,callback){var price=priceJSON.price;var originalPrice=priceJSON.originalPrice;if(!$.isNumeric(price)){callback.call({price:0},null);return;}
var userIdCookieValue="prouserid".getCookie();var experientCookieName="tb_rate";var experientCookieValue=experientCookieName.getCookie().toLowerCase();var ajaxUrl="//taobao.fanli.com/service/getUserRateType";var baseRate=FLNS.taobaoRate;var criticalPointOne=5.5;var criticalPointTwo=2;var aboveRate=0.25;var aboveRate1=0.55;var aboveRate2=0.25;var aboveRate3=0.35;var belowRate=0.8;var beginDate=new Date(2013,1,1,0,0,0,0);var endDate=new Date(2013,3,30,23,59,59,999);var newBeginDate=new Date(2013,4,1,0,0,0,0);var newEndDate=new Date(2013,5,30,23,59,59,999);var nEndDate=new Date(2013,5,1,0,0,0,0);var nnEndDate=new Date(2013,6,30,23,59,59,999);var currentDate=new Date();var callback=$.isFunction(callback)?callback:$.noop;var resultConfig={basal:price*baseRate,colorful:price>criticalPointTwo?belowRate*criticalPointTwo+aboveRate*(price-criticalPointTwo):price*belowRate,firstStrategy:theFirstStrategy(),secondStrategy:theSecondStrategy(),thirdStrategy:theThirdStrategy(),fourthStrategy:theFourthStategy(),fifthStrategy:theFifthStategy()};var experientConfig={"a":"basal","b":"colorful","c":"thirdStrategy","d":"firstStrategy","e":"secondStrategy","f":"fourthStrategy","g":"fifthStrategy","p":"basal"};var experientConfig1={"a":"basal","b":"basal","c":"basal","d":"basal","e":"basal","f":"fourthStrategy","g":"fifthStrategy","p":"basal"};var experientConfig2={"a":"basal","b":"basal","c":"basal","d":"basal","e":"basal","f":"basal","g":"basal","p":"basal"};if(currentDate>nnEndDate){callback.call({price:numberConvert(resultConfig["basal"])},null);return;}
if(currentDate>=newBeginDate&&currentDate<=nEndDate){experientConfig=experientConfig1;}
else if(currentDate>nEndDate&&currentDate<=nnEndDate){experientConfig=experientConfig2;}
if(!userIdCookieValue){unloginHandler();}
else{if(!experientCookieValue||experientCookieValue=="null"){$.ajax({url:ajaxUrl,dataType:"jsonp",jsonp:"jsoncallback",success:function(result){if(result.status=="1"){callback.call({price:numberConvert(resultConfig[experientConfig[result.data.rateType.toLowerCase()]])},null);}
else{unloginHandler();}},error:function(){unloginHandler();}});}
else{var tem=experientConfig[experientCookieValue]||'basal';callback.call({price:numberConvert(resultConfig[tem])},null);}}
function unloginHandler(){callback.call({price:numberConvert(resultConfig["basal"])},null);}
function numberConvert(i){return Number(new Number(i).toFixed(2));}
function theFirstStrategy(){return price>=criticalPointTwo?belowRate*criticalPointTwo+aboveRate1*(price-criticalPointTwo):price*belowRate;}
function theSecondStrategy(){if(price<criticalPointTwo){return price*belowRate;}
else if(price>=criticalPointTwo&&price<criticalPointOne){return belowRate*criticalPointTwo+aboveRate2*(price-criticalPointTwo)}
else{return price*baseRate;}}
function theThirdStrategy(){return price<criticalPointOne?price*baseRate:baseRate*criticalPointOne+aboveRate3*(price-criticalPointOne);}
function theFourthStategy(){if(price<criticalPointTwo){return price*belowRate;}
else if(price>=criticalPointTwo&&price<criticalPointOne){return criticalPointTwo*belowRate+aboveRate*(price-criticalPointTwo)}
else{return price*baseRate;}}
function theFifthStategy(){var maxOne=0.5;var maxTwo=1;if(price<=0.5){return Math.min(maxOne,originalPrice*0.35);}
else if(price>0.5&&price<=1){return Math.min(maxTwo,originalPrice*0.35);}
else if(price>1&&price<criticalPointTwo){return price*belowRate;}
else if(price>=criticalPointTwo&&price<criticalPointOne){return criticalPointTwo*belowRate+aboveRate*(price-criticalPointTwo);}
else{return price*baseRate;}}});})(jQuery);(function($){$("a[data-lc]").on("click",function(){var $this=$(this);var originHref=$this.attr("href");var lc=$this.attr("data-lc");if(!originHref){return;}
if(originHref.indexOf("?")>-1){$this.attr("href","{0}&lc={1}".format(originHref,lc));}else{$this.attr("href","{0}?lc={1}".format(originHref,lc));}});}(jQuery));(function(){var hostDomain=Fanli.Utility.rootDomain;var host=location.host.toLowerCase();var newLocation=location.href.replace(/51fanli\.com/i,'fanli.com');if(!host||hostDomain=='.fanli.com'||/^(fun|trace)\./.test(host)){return;}
else{window.location.href=newLocation;}})();(function(){try{$(window).on("message",function(event){var _origin=event.origin;if(_origin&&/\.fanli\.com/.test(_origin)&&event.data=='closeIDGIframe'){var _idgBox=document.getElementById('J_idg_box');_idgBox&&document.body.removeChild(_idgBox);}},false);}catch(error){}}());var passportAppUrl="//passport{0}".format(Fanli.Utility.rootDomain);var redirectPrefixAfterLogin="{0}/redirect/loginsuccess".format(passportAppUrl);var redirectPrefixAfterRegister="{0}/redirect/regsuccess".format(passportAppUrl);var verifyCodeImageUrl="//fun{0}/verify.png?".format(Fanli.Utility.rootDomain);;(function(exports){var traceCrossPageCookie="__fl_trace_cpc";var traceCrossNativeAndPageCookie="__fl_trace_cnpc";var traceCrossPageCookie1="__fl_trace_cpc1";var tid=(function(){var d=new Date().getTime();if(typeof performance!=='undefined'&&typeof performance.now==='function'){d+=performance.now();}
return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c==='x'?r:(r&0x3|0x8)).toString(16);});}()).toUpperCase();var domain=(function(){var tryExecLocation=/.*(\.\w*\.\w*)$/ig.exec(location.hostname);var rootDomain=".fanli.com";if(tryExecLocation){rootDomain=tryExecLocation[1];}
return rootDomain;}());var urlReg=/^(?:(?:http(?:s)?:\/\/)?[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])|(?:\/.*))*$/ig;var CookieOperation=(function(){function _setCookie(name,value,expiryDays,domain,path,secure){var builder=[name,"=",escape(value)];if(expiryDays){var date=new Date();date.setTime(date.getTime()+(expiryDays*86400000));builder.push(";expires=");builder.push(date.toUTCString());}
if(domain){builder.push(";domain=");builder.push(domain);}
if(path){builder.push(";path=");builder.push(path);}
if(secure){builder.push(";secure");}
document.cookie=builder.join("");}
function _getCookie(name){var re=new RegExp('\\b'+name+'\\s*=\\s*([^;]*)','i');var match=re.exec(document.cookie);return(match&&match.length>1?unescape(match[1]):'');}
return{setCookie:_setCookie,getCookie:_getCookie};}());var StringOperation={format:function(s,args){for(var i=0;i<args.length;++i){s=s.replace(new RegExp("\\{"+i+"\\}","g"),args[i]);}
return s;},isUrl:function(url){if(!url){return false;}
urlReg.lastIndex=0;url=url.toString();return urlReg.test(url);}};var traceCrossNativeAndPageCookieValue=CookieOperation.getCookie(traceCrossNativeAndPageCookie);if(traceCrossNativeAndPageCookieValue){CookieOperation.setCookie(traceCrossPageCookie,traceCrossNativeAndPageCookieValue,"",domain,"/");CookieOperation.setCookie(traceCrossNativeAndPageCookie,null,-1,domain,"/");}
var ptid=CookieOperation.getCookie(traceCrossPageCookie);exports.UBT={isObject:function(obj){return Object.prototype.toString.call(obj)==="[object Object]";},uswitch:true,commonData:{referrer:encodeURIComponent(document.referrer),resolution_h:window.screen.height||0,resolution_v:window.screen.width||0,resolution_r:window.devicePixelRatio||1,language:navigator.language||navigator.userLanguage,url:encodeURIComponent(location.href)},behaviorData:{tab:""},mergeData:function(options){var dataObj=this.commonData;if(this.isObject(options)){for(var k in options){if(options.hasOwnProperty(k)){dataObj[k]=options[k];}}}
return this;},_sendPV:function(){var builder=[];var dataObj=this.commonData;for(var j in dataObj){if(dataObj.hasOwnProperty(j)){builder.push(StringOperation.format("{0}={1}",[j,dataObj[j]]));}}
builder.push("eventtype=pv");this._buildTrackImg(builder.join("&"));},track:function(){if(!this.uswitch){return;}
var tArr=[];var builder=[];var length=arguments.length;if(/evttype\=.+/.test(arguments[length-1])){builder.push(arguments[length-1]);length=length-1;}else{builder.push("evttype=cd");}
for(var i=0;i<length;i++){tArr.push([arguments[i]]);}
builder.push(StringOperation.format("spm={0}",[encodeURIComponent(tArr.join("."))]));this._buildTrackImg(builder.join("&"));return false;},_buildTrackImg:(function(){var imgs=[];return function(parastr){var img=new Image();var userid=CookieOperation.getCookie("prouserid");var utmo=CookieOperation.getCookie("__utmo");var utmp=CookieOperation.getCookie("__utmp");var utmt=CookieOperation.getCookie("__utmt");var $flMeta=$("meta[name=flpn]");var defaultParameterArr=[];var sliceNo=0;if(utmo){defaultParameterArr.push("utmo="+utmo);}
if(utmp){defaultParameterArr.push("utmp="+utmp);}
if(utmt){defaultParameterArr.push("utmt="+utmt);}
if(userid){defaultParameterArr.push("userid="+userid);}
defaultParameterArr.push("tid="+tid);if(ptid){defaultParameterArr.push("ptid="+ptid);}
defaultParameterArr.push("timestamp="+new Date().getTime());if($flMeta.length>0){defaultParameterArr.push(StringOperation.format("flpn={0}",[$flMeta.attr("content")]));}
img.onload=img.onerror=function(){img.onload=img.onerror=null;}
imgs.push(img);sliceNo=Math.round(Math.random()*9);if(location.pathname.toLowerCase().indexOf("zhide")>-1){sliceNo=0}
img.src="https://ubt"+sliceNo+".fanli.com/index.html?"+parastr+"&"+defaultParameterArr.join("&");}})(),PlugIns:(function(){var $window=$(window);return{clickOperation:function(options){var timeId;$(document).on("click","a, button, i, span, input[type=button], input[type=submit], .J_fanli_ubt_trigger",function(ev){var $this=$(this);var $ancestor=$this.parents();var ancestorLen=$ancestor.length;var temArr=[];var traceStr="";var parameterArr=[];var $module=$this.closest(".J_ubt_module");var module=$module.length>0&&$module.data("spm");var ubtindex=$this.data("ubtindex");var halfScreen=(window.innerWidth||document.documentElement.clientWidth||document.body.offsetWidth)/2;var tagName=$this[0].tagName;var dataId=$this.data("id");var elementId=$this.attr("id");var klass=$.trim($this.attr("class")||"");var href=$this.attr("href");var text=$.trim($this.attr("data-ubttext")||$this.text()||"");var val=$this.val();var spm=$this.data("spm")||"";var tryHash;var xpathArr=[];var coordinate={x:ev.pageX-halfScreen,y:ev.pageY};parameterArr.push("coordinate="+encodeURIComponent("{x:"+coordinate.x+",y:"+coordinate.y+"}"));if(StringOperation.isUrl(href)&&spm){if(href.indexOf("spm")>-1){href=href.replace(/spm=[^&#]*/,"spm="+spm);}else{tryHash=href.match(/.*(#.*)$/);if(tryHash){href=href.replace(/(#.*)$/ig,'');}
if(href.indexOf("?")>-1){href=href+"&spm="+spm;}else{href=href+"?spm="+spm;}
if(tryHash){href=href+tryHash[1];}}
$this.attr("href",href);}
parameterArr.push("evttype=click");if(href&&href!="javascript:void(0);"&&href!="javascript:void(0)"){parameterArr.push("href="+encodeURIComponent(href));}
if(spm){parameterArr.push("spm="+spm);}
if(module){parameterArr.push("module="+module);}
if(ubtindex){parameterArr.push("index="+ubtindex);}
parameterArr.push("depth="+Math.round(($(window).scrollTop()/$(document).height())*100));xpathArr.push(tagName.toLowerCase()+"["+$this.index()+"]");temArr.push(tagName);if(dataId){temArr.push(StringOperation.format("[data-id={0}]",[dataId]));}
if(href){temArr.push(StringOperation.format("[href={0}]",[href]));}
if(elementId){temArr.push(StringOperation.format("[id={0}]",[elementId]));}
if(klass){temArr.push(StringOperation.format("[class={0}]",[klass]));}
if(text){temArr.push(StringOperation.format("[text={0}]",[text]));}
if(val){temArr.push(StringOperation.format("[value={0}]",[val]));}
traceStr+=temArr.join("");temArr.length=0;for(var i=0;i<ancestorLen;i++){var $currentNode=$ancestor.eq(i);var currentNode=$ancestor.get(i);var id=$currentNode.attr("id");var klass=$.trim($currentNode.attr("class")||"");var tagName=currentNode.tagName;if(tagName=="HTML"||tagName=="BODY"){break;}
temArr.push(tagName);if(id){temArr.push(StringOperation.format("[id={0}]",[id]));}
if(klass){temArr.push(StringOperation.format("[class={0}]",[klass]));}
if(i>=5-1){break;}
traceStr+="_"+temArr.join("");temArr.length=0;}
for(var i=0;i<ancestorLen;i++){var $currentNode=$ancestor.eq(i);var tagName=$currentNode[0].tagName.toLowerCase();if(tagName=="html"||tagName=="body"){xpathArr.push(tagName);}else{xpathArr.push(tagName+"["+$currentNode.index()+"]");}}
parameterArr.push("evt=click_"+encodeURIComponent(traceStr));parameterArr.push("xpath="+xpathArr.reverse().join('/'));if(timeId){clearTimeout(timeId);}
CookieOperation.setCookie(traceCrossPageCookie,tid,"",domain,"/");timeId=setTimeout(function(){UBT._buildTrackImg(parameterArr.join("&"));CookieOperation.setCookie(traceCrossPageCookie1,location.href+"@@"+xpathArr.join('/'),"",domain,"/");},25);});return UBT.PlugIns;},scrollOperation:function(){var $w=$(window);var $d=$(document);var sid;var parameterArr=[];$w.on("scroll",function(ev){if(sid){clearTimeout(sid);}
sid=setTimeout(function(){var scrollTop=$w.scrollTop();var documentHeight=$d.height();parameterArr.push("dept={0}-{1}".format(scrollTop,documentHeight));parameterArr.push("spm="+Math.round((scrollTop/documentHeight)*100));parameterArr.push("evttype=scroll");if(UBT.behaviorData.tab){parameterArr.push("tab="+UBT.behaviorData.tab);}
UBT._buildTrackImg(parameterArr.join("&"));parameterArr.length=0;},800);});return UBT.PlugIns;},Exposure:{exposureArr:[],uniqueExposureObj:{},init:function(options){var settings=$.extend(true,{$ele:$(".lazy, .J_lazy, .J_lazy_img, .J_lazyimg, .J_need_exposure").filter("[data-expo]")},options);var $ele=settings.$ele;$ele.each(function(){var $this=$(this);var dataExpo=$this.data("expo");if(UBT.PlugIns.Exposure.__isHidden($this)){return true;}
if(dataExpo&&!$this.hasPush&&UBT.PlugIns.Exposure.__inViewport($this)){$this.hasPush=true;if(!UBT.PlugIns.Exposure.uniqueExposureObj[dataExpo]){UBT.PlugIns.Exposure.exposureArr.push(dataExpo);UBT.PlugIns.Exposure.uniqueExposureObj[dataExpo]=true;}
return true;}
if($this.hasBindScroll){return true;}
$ele.hasBindScroll=true;function scrollHandler(){if(!$this.hasPush&&UBT.PlugIns.Exposure.__inViewport($this)){$this.hasPush=true;if(!UBT.PlugIns.Exposure.uniqueExposureObj[dataExpo]){UBT.PlugIns.Exposure.exposureArr.push(dataExpo);UBT.PlugIns.Exposure.uniqueExposureObj[dataExpo]=true;}}}
$window.on("scroll.EXPOSURE resize.EXPOSURE",scrollHandler);});$window.on("scroll.EXPOSURESEND resize.EXPOSURE",UBT.PlugIns.Exposure.__throttle(250,UBT.PlugIns.Exposure.send));UBT.PlugIns.Exposure.send();return UBT.PlugIns;},send:function(){setTimeout(function(){if(UBT.PlugIns.Exposure.exposureArr.length>0){UBT.track('common_baoguang','prouserid'.getCookie()||'ZYSCUSERID'.getCookie()||window.fl&&window.fl.app.uid||$("#J_haohuo_uid").val()||'[userid]',UBT.PlugIns.Exposure.exposureArr.join(","),"evttype=exposure");UBT.PlugIns.Exposure.exposureArr=[];}},200);},prepareToSend:function(dataExpo){if(!UBT.PlugIns.Exposure.uniqueExposureObj[dataExpo]){UBT.PlugIns.Exposure.exposureArr.push(dataExpo);UBT.PlugIns.Exposure.uniqueExposureObj[dataExpo]=true;}
setTimeout(function(){UBT.PlugIns.Exposure.send();},250);},__inViewport:function($el){return!UBT.PlugIns.Exposure.__abovethetop($el)&&!UBT.PlugIns.Exposure.__belowthefold($el)&&!UBT.PlugIns.Exposure.__leftofbegin($el)&&!UBT.PlugIns.Exposure.__rightoffold($el);},__belowthefold:function($el){var fold=$window.height()+$window.scrollTop();return fold<=$el.offset().top;},__abovethetop:function($el){var fold=$window.scrollTop();return fold>=$el.offset().top+$el.height();},__rightoffold:function($el){var fold=$window.width()+(typeof Zepto==='function'?window.pageXOffset:$window.scrollLeft());return fold<=$el.offset().left;},__leftofbegin:function($el){var fold=typeof Zepto==='function'?window.pageXOffset:$window.scrollLeft();return fold>=$el.offset().left+$el.width();},__isHidden:function($el){if(typeof jQuery==="function"){return jQuery($el).is(":hidden");}
if($el.length==0){return true;}
var elem=$el[0];var width=elem.offsetWidth;var height=elem.offsetHeight;return(width===0&&height===0)||$el.css("display")==="none";},__throttle:function(delay,fn,debounce_mode){var last=0,timeId;if(typeof fn!=='function'){debounce_mode=fn;fn=delay;delay=250;}
function wrapper(){var that=this,period=(new Date()).getTime()-last,args=arguments;function exec(){last=(new Date()).getTime();fn.apply(that,args);};function clear(){timeId=undefined;};if(debounce_mode&&!timeId){exec();}
timeId&&clearTimeout(timeId);if(debounce_mode===undefined&&period>delay){exec();}else{timeId=setTimeout(debounce_mode?clear:exec,debounce_mode===undefined?delay-period:delay);}};return wrapper;}}}})(),init:function(){var traceCrossPageCookie1Value=CookieOperation.getCookie(traceCrossPageCookie1);this._sendPV();CookieOperation.setCookie(traceCrossPageCookie,tid,"",domain,"/");if(traceCrossPageCookie1Value){UBT.track(traceCrossPageCookie1Value,"evttype=autotracefromlastpage");CookieOperation.setCookie(traceCrossPageCookie1,null,-1,domain,"/");}
return this;}};}(this));(function(){if(UBT.uswitch){UBT.mergeData(typeof fgv!="undefined"&&fgv.fanlitrace?fgv.fanlitrace:{}).init();UBT.PlugIns.clickOperation().scrollOperation();UBT.PlugIns.Exposure.init();}}());;(function(a){a.fn.placeholder=function(d){d=a.extend({type:"value",color:"#BCBCBC",zIndex:false,klass:false,offset:[0,0],repair:false,onLoad:false},d);var b=document.createElement("input");var c="placeholder"in b;if(!c){return this.each(function(){var l=a(this);var q=l.attr("placeholder");var m=d.type;if(m=="label"){var o=a('<label style="display:none;position:absolute;cursor:text;"></label>');var f=l.attr("id");var i=l.position();var g=l.width();var r=l.outerHeight();var h=l.css("padding-left");var n=l.css("z-index");var s=l.css("font-size");var e=l.css("text-indent");if(!f){f="placeholderId"+Math.random();l.attr("id",f)}if(n!="auto"){n=n+1}if(!d.klass){o.css({"z-index":n,left:i.left+d.offset[0],top:i.top+d.offset[1],width:g+"px","padding-left":h,color:d.color,"font-size":s,"line-height":r+"px","text-indent":e})}else{o.addClass(d.klass)}o.text(q).attr("for",f).insertBefore(this);function j(){o.hide()}function p(){var t=l.attr("placeholder");if(l.val()==""){o.text(t).show()}}if(d.onLoad){a(window).load(p)}else{p()}function k(){var t=l.position();o.css({left:t.left+d.offset[0],top:t.top+d.offset[1]})}l.on({"focus.placeholder":j,"blur.placeholder":p,"change.placeholder":p,"input.placeholder":p,"show.placeholder":function(){k();p()}});if(!window.screenX){l.on("keyup.placeholder",j);o[0].onpaste=function(){setTimeout(j,30)}}o[0].oncontextmenu=function(){l.focus();return false};o.on("click.placeholder",function(){l.focus()});if(l.prop("disabled")){o.off("click.placeholder")}a(window).on({"resize.placeholder":k,"load.placeholder":k})}else{if(m=="value"){if(l.val()==""){l.addClass(d.klass).css("color",d.color).val(l.attr("placeholder"))}l.focus(function(){if(l.val()==l.attr("placeholder")){l.removeClass(d.klass).css("color","").val("")}}).blur(function(){if(l.val()==""){l.addClass(d.klass).css("color",d.color).val(l.attr("placeholder"))}})}}})}}})(jQuery);;(function(a){function b(b,c,d){var e=this,f=a(this),g="beforeSwitch",h="onSwitch";a.isFunction(c[g])&&f.bind(g,c[g]),a.isFunction(c[h])&&f.bind(h,c[h]),a.extend(e,{_initPlugins:function(){var b=a.switchable.Plugins,c=b.length,d=0;for(;d<c;d++)b[d].init&&b[d].init(e)},_init:function(){e.container=b,e.config=c,!c.panels||!c.panels.jquery&&a.type(c.panels)!=="string"?e.panels=b.children():e.panels=b.find(c.panels),e.length=Math.ceil(e.panels.length/c.steps);if(e.length<1){window.console&&console.warn("No panel in "+d);return}e.index=c.initIndex===null?undefined:c.initIndex+(c.initIndex<0?e.length:0),c.effect==="none"&&e.panels.slice(e.index*c.steps,(e.index+1)*c.steps).show();if(!!c.triggers){var f,g,h;if(c.triggers.jquery)e.triggers=c.triggers.slice(0,e.length);else{var i=a.type(c.triggers)==="string",j=[];for(g=1;g<=e.length;g++)j.push("<li>"+(i?c.triggers:g)+"</li>");e.triggers=a("<ul/>",{"class":c.triggersWrapCls,html:j.join("")})[c.putTriggers](b).find("li")}e.triggers.eq(e.index).addClass(c.currentTriggerCls);for(g=0;g<e.length;g++)f=e.triggers.eq(g),f.click({index:g},function(a){h=a.data.index;if(!e._triggerIsValid(h))return;e._cancelDelayTimer(),e.switchTo(h)}),c.triggerType==="mouse"&&f.mouseenter({index:g},function(a){h=a.data.index;if(!e._triggerIsValid(h))return;e._delayTimer=setTimeout(function(){e.switchTo(h)},c.delay*1e3)}).mouseleave(function(){e._cancelDelayTimer()})}},_triggerIsValid:function(a){return e.index!==a},_cancelDelayTimer:function(){e._delayTimer&&(clearTimeout(e._delayTimer),e._delayTimer=undefined)},_switchTrigger:function(a,b){e.triggers.eq(a).removeClass(c.currentTriggerCls).end().eq(b).addClass(c.currentTriggerCls)},_switchPanels:function(b,d,f){a.switchable.Effects[c.effect].call(e,b,d,f)},willTo:function(a){return a?e.index>0?e.index-1:c.loop?e.length-1:!1:e.index<e.length-1?e.index+1:c.loop?0:!1},switchTo:function(b,d){var i=a.Event(g);f.trigger(i,[b]);if(i.isDefaultPrevented())return;return e._switchPanels(e.index,b,d),!c.triggers||e._switchTrigger(e.index,b),e.index=b,i.type=h,f.trigger(i,[b]),e}}),e._init(),e._initPlugins()}a.switchable={Config:{triggers:!0,putTriggers:"insertAfter",triggersWrapCls:"switchable-triggers",currentTriggerCls:"current",panels:null,steps:1,triggerType:"mouse",delay:.1,initIndex:0,effect:"none",easing:"ease",duration:.5,loop:!0,beforeSwitch:null,onSwitch:null,api:!1},Effects:{none:function(a,b){var c=this,d=c.config;c.panels.slice(a*d.steps,(a+1)*d.steps).hide().end().slice(b*d.steps,(b+1)*d.steps).show()}},Plugins:[]},a.fn.switchable=function(c){var d=a(this),e=d.length,f=d.selector,g=[],h;c=a.extend({},a.switchable.Config,c),c.effect=c.effect.toLowerCase();for(h=0;h<e;h++)g[h]=new b(d.eq(h),c,f+"["+h+"]");return c.api?g[0]:d}})(jQuery),function(a){function b(){var a=document.documentElement,b=["Webkit","Moz"],c="transition",d="",e;if(a.style[c]!==undefined)d=c;else for(e=0;e<2;e++)if(a.style[c=b[e]+"Transition"]!==undefined){d=c;break}return d}a.switchable.Anim=function(c,d,e,f,g,h){var i=this,j={},k,l;a.switchable.Transition===undefined&&(a.switchable.Transition=b()),k=a.switchable.Transition,a.extend(i,{isAnimated:!1,run:function(){if(i.isAnimated)return;e=e*1e3;if(k)j[k+"Property"]=h||"all",j[k+"Duration"]=e+"ms",j[k+"TimingFunction"]=f,c.css(a.extend(d,j)),l=setTimeout(function(){i._clearCss(),i._complete()},e);else{var b=/cubic-bezier\(([\s\d.,]+)\)/,g=f.match(b),m=a.switchable.TimingFn[f];if(m||g)f=a.switchable.Easing(g?g[1]:m.match(b)[1]);c.animate(d,e,f,function(){i._complete()})}return i.isAnimated=!0,i},stop:function(a){if(!i.isAnimated)return;return k?(clearTimeout(l),l=undefined):c.stop(!1,a),i.isAnimated=!1,i},_complete:function(){g&&g()},_clearCss:function(){j[k+"Property"]="none",c.css(j)}})}}(jQuery),function(a){function b(a){return"cubic-bezier("+a+")"}function c(a){var b=[],c=101,d;for(d=0;d<=c;d++)b[d]=a.call(null,d/c);return function(a){if(a===1)return b[c];var d=c*a,e=Math.floor(d),f=b[e],g=b[e+1];return f+(g-f)*(d-e)}}function d(a,b,c,d,e,f){function h(a){return((g*a+bx)*a+cx)*a}function i(a){return((ay*a+by)*a+cy)*a}function j(a){return(3*g*a+2*bx)*a+cx}function k(a){return 1/(200*a)}function l(a,b){return i(m(a,b))}function m(a,b){function k(a){return a>=0?a:0-a}var c,d,e,f,g,i;for(e=a,i=0;i<8;i++){f=h(e)-a;if(k(f)<b)return e;g=j(e);if(k(g)<1e-6)break;e=e-f/g}c=0,d=1,e=a;if(e<c)return c;if(e>d)return d;while(c<d){f=h(e);if(k(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)*.5+c}return e}var g=bx=cx=ay=by=cy=0;return cx=3*b,bx=3*(d-b)-cx,g=1-cx-bx,cy=3*c,by=3*(e-c)-cy,ay=1-cy-by,l(a,k(f))}a.switchable.TimingFn={ease:b(".25, .1, .25, 1"),linear:b("0, 0, 1, 1"),"ease-in":b(".42, 0, 1, 1"),"ease-out":b("0, 0, .58, 1"),"ease-in-out":b(".42, 0, .58, 1")},a.switchable.Easing=function(e){var f,g,h=0;e=e.split(","),g=e.length;for(;h<g;h++)e[h]=parseFloat(e[h]);if(g!==4)window.console&&console.warn(b(e.join(", "))+" missing argument.");else{f="cubic-bezier-"+e.join("-");if(!a.easing[f]){var i=c(function(a){return d(a,e[0],e[1],e[2],e[3],5)});a.easing[f]=function(a,b,c,d){return i.call(null,a)}}}return f}}(jQuery),function(a){a.extend(a.switchable.Config,{autoplay:!1,interval:3,pauseOnHover:!0}),a.switchable.Plugins.push({name:"autoplay",init:function(b){function h(){g=b.willTo(b.isBackward);if(g===!1){b._cancelTimers();return}b.switchTo(g,b.isBackward?"backward":"forward")}function i(){f=setInterval(function(){h()},(c.interval+c.duration)*1e3)}var c=b.config,d=!1,e,f,g;if(!c.autoplay||b.length<=1)return;c.pauseOnHover&&b.panels.add(b.triggers).hover(function(){b._pause()},function(){d||b._play()}),a.extend(b,{_play:function(){b._cancelTimers(),b.paused=!1,e=setTimeout(function(){h(),i()},c.interval*1e3)},_pause:function(){b._cancelTimers(),b.paused=!0},_cancelTimers:function(){e&&(clearTimeout(e),e=undefined),f&&(clearInterval(f),f=undefined)},play:function(){return b._play(),d=!1,b},pause:function(){return b._pause(),d=!0,b}}),b._play()}})}(jQuery),function(a){a.extend(a.switchable.Config,{prev:null,next:null}),a.switchable.Plugins.push({name:"carousel",init:function(b){var c=b.config,d=["backward","forward"],e=["prev","next"],f,g,h,i=0;if(!c.prev&&!c.next)return;for(;i<2;i++)f=e[i],g=c[f],g&&(h=b[f+"Btn"]=g.jquery?g:a(g),h.click({direction:d[i]},function(a){a.preventDefault();if(b.config.autoplay){b._pause()};if(!b.anim){var c=a.data.direction,e=b.willTo(c===d[0]);e!==!1&&b.switchTo(e,c)}if(b.config.autoplay){b._play()};}))}})}(jQuery),function(a){a.switchable.Effects.fade=function(b,c){var d=this,e=d.config,f=d.panels,g=f.eq(b),h=f.eq(c);d.anim&&(d.anim.stop(),f.eq(d.anim.to).css({zIndex:d.length}).end().eq(d.anim.from).css({opacity:0,zIndex:1})),h.css({opacity:1}),d.anim=(new a.switchable.Anim(g,{opacity:0},e.duration,e.easing,function(){h.css({zIndex:d.length}),g.css({zIndex:1}),d.anim=undefined},"opacity")).run(),d.anim.from=b,d.anim.to=c},a.switchable.Plugins.push({name:"fade effect",init:function(a){var b=a.config,c=a.panels.eq(a.index);if(b.effect!=="fade"||b.steps!==1)return;a.panels.not(c).css({opacity:0,zIndex:1}),c.css({opacity:1,zIndex:a.length})}})}(jQuery),function(a){var b=["scrollleft","scrollright","scrollup","scrolldown"],c="position",d="absolute",e="relative";a.extend(a.switchable.Config,{end2end:!1,groupSize:[],visible:null,clonedCls:"switchable-cloned"});for(var f=0;f<4;f++)a.switchable.Effects[b[f]]=function(b,c,d){var e=this,f=e.config,g=e.length-1,h=d==="backward",i=f.end2end&&(h&&b===0&&c===g||d==="forward"&&b===g&&c===0),j={};j[e.isHoriz?"left":"top"]=i?e._adjustPosition(h):-e.groupSize[e.isHoriz?0:1]*c,e.anim&&e.anim.stop(),e.anim=(new a.switchable.Anim(e.panels.parent(),j,f.duration,f.easing,function(){i&&e._resetPosition(h),e.anim=undefined})).run()};a.switchable.Plugins.push({name:"scroll effect",init:function(f){var g=f.config,h=g.steps,i=f.panels,j=i.parent(),k=a.inArray(g.effect,b),l=k===0||k===1,m=i.eq(0).outerWidth(!0),n=i.eq(0).outerHeight(!0),o=l?0:1,p=f.length-1,q=l?"left":"top",r={};if(k===-1)return;f.groupSize=[g.groupSize[0]||m*h,g.groupSize[1]||n*h];if(g.end2end){var s=i.length,t=!l&&g.groupSize[0]?f.groupSize[o]*f.length:(l?m:n)*s,u=s-p*h,v=(l?m:n)*u,w=!l&&g.groupSize[0]?f.groupSize[o]:v,x;g.loop=!0,g.visible&&g.visible<s&&g.visible>u&&i.slice(0,g.visible).clone(!0).addClass(g.clonedCls).appendTo(j).click(function(){i.eq(a(this).index()-s).click()}),a.extend(f,{_adjustPosition:function(a){return x=a?p:0,r[c]=e,r[q]=(a?-1:1)*t,i.slice(x*h,(x+1)*h).css(r),a?w:-t},_resetPosition:function(a){x=a?p:0,r[c]="",r[q]="",i.slice(x*h,(x+1)*h).css(r),r[c]=undefined,r[q]=a?-f.groupSize[o]*p:0,j.css(r)}})}f.container.css(c)=="static"&&f.container.css(c,e),r[c]=d,r[q]=-f.groupSize[o]*f.index,j.css(r).css("width",l?2*f.groupSize[o]*f.length:g.groupSize[0]?g.groupSize[0]:undefined),f.isHoriz=l,f.isBackward=k===1||k===3}})}(jQuery),function(a){var b=["accordion","horizaccordion"],c=[["height","marginTop","marginBottom","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],["width","marginLeft","marginRight","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]];a.extend(a.switchable.Config,{multiple:!1,customProps:{}});for(var d=0;d<2;d++)a.switchable.Effects[b[d]]=function(b,c){var d=this,e=d.config,f=b!==c;d.anim&&d.anim.stop(f),d.anim=(new a.switchable.Anim(d.panels.eq(c),d.triggers.eq(c).hasClass(e.currentTriggerCls)?d.collapseProps:d.expandProps[c],e.duration,e.easing,function(){d.anim=undefined})).run(),!e.multiple&&b!==undefined&&f&&(d.anim2&&d.anim2.stop(f),d.anim2=(new a.switchable.Anim(d.panels.eq(b),d.collapseProps,e.duration,e.easing,function(){d.anim2=undefined})).run())};a.switchable.Plugins.push({name:"accordion effect",init:function(d){var e=d.config,f=a.inArray(e.effect,b);if(f===-1||e.steps!==1)return;window.console&&console.info("Remember to set the border-width for the accordion's panels, even without border."),a.extend(d,{_triggerIsValid:function(a){return!0},_switchTrigger:function(a,b){var c=d.triggers,f=e.currentTriggerCls;c.eq(b).toggleClass(f),!e.multiple&&a!==undefined&&a!==b&&c.eq(a).removeClass(f)}}),d.expandProps=[],d.collapseProps={};var g=c[f].length,h={},i,j,k;for(k=0;k<g;k++)d.collapseProps[c[f][k]]=0;a.extend(d.collapseProps,e.customProps);for(k=0;k<d.length;k++){i=d.panels.eq(k);for(var l=0;l<g;l++)j=c[f][l],h[j]=i.css(j);d.expandProps.push(a.extend({},h)),i.css(a.extend({overflow:"hidden"},k===d.index?h:d.collapseProps))}}})}(jQuery);;
/*
 * jQuery UI Autocomplete 1.8.22
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 * jquery.ui.core.js
 * jquery.ui.widget.js
 * jquery.ui.position.js
 */

/* jQuery UI - v1.8.22 - 2012-07-24
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.22",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);;
/* jQuery UI - v1.8.22 - 2012-07-24
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);;
/* jQuery UI - v1.8.22 - 2012-07-24
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?a.isFunction(b)?this.each(function(c){a(this).offset(b.call(this,c,a(this).offset()))}):this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()})(jQuery);;(function($,undefined){var requestIndex=0;$.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,autoSubmitViaEnter:0},pending:0,_create:function(){var self=this,doc=this.element[0].ownerDocument,suppressKeyPress;this.isMultiLine=this.element.is("textarea");this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(event){if(self.options.disabled||self.element.propAttr("readOnly")){return}suppressKeyPress=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:self._move("previousPage",event);break;case keyCode.PAGE_DOWN:self._move("nextPage",event);break;case keyCode.UP:self._keyEvent("previous",event);break;case keyCode.DOWN:self._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:if(self.menu.active&&!self.options.autoSubmitViaEnter){suppressKeyPress=true;event.preventDefault()}case keyCode.TAB:if(!self.menu.active){return}self.menu.select(event);break;case keyCode.ESCAPE:self.element.val(self.term);self.close(event);break;default:clearTimeout(self.searching);self.searching=setTimeout(function(){if(self.term!=self.element.val()){self.selectedItem=null;self.search(null,event)}},self.options.delay);break}}).bind("keypress.autocomplete",function(event){if(suppressKeyPress&&!self.options.autoSubmitViaEnter){suppressKeyPress=false;event.preventDefault()}}).bind("focus.autocomplete",function(){if(self.options.disabled){return}self.selectedItem=null;self.previous=self.element.val()}).bind("blur.autocomplete",function(event){if(self.options.disabled){return}clearTimeout(self.searching);self.closing=setTimeout(function(){self.close(event);self._change(event)},150)});this._initSource();this.menu=$("<ul></ul>").addClass("ui-autocomplete").appendTo($(this.options.appendTo||"body",doc)[0]).mousedown(function(event){var menuElement=self.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length){setTimeout(function(){$(document).one('mousedown',function(event){if(event.target!==self.element[0]&&event.target!==menuElement&&!$.ui.contains(menuElement,event.target)){self.close()}})},1)}setTimeout(function(){clearTimeout(self.closing)},13)}).menu({focus:function(event,ui){var item=ui.item.data("item.autocomplete");if(false!==self._trigger("focus",event,{item:item})){if(/^key/.test(event.originalEvent.type)){self.element.val(item.value)}}},selected:function(event,ui){var item=ui.item.data("item.autocomplete"),previous=self.previous;if(self.element[0]!==doc.activeElement){self.element.focus();self.previous=previous;setTimeout(function(){self.previous=previous;self.selectedItem=item},1)}if(false!==self._trigger("select",event,{item:item})){self.element.val(item.value)}self.term=self.element.val();self.close(event);self.selectedItem=item},blur:function(event,ui){if(self.menu.element.is(":visible")&&(self.element.val()!==self.term)){self.element.val(self.term)}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if($.fn.bgiframe){this.menu.element.bgiframe()}self.beforeunloadHandler=function(){self.element.removeAttr("autocomplete")};$(window).bind("beforeunload",self.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();$(window).unbind("beforeunload",this.beforeunloadHandler);$.Widget.prototype.destroy.call(this)},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key==="source"){this._initSource()}if(key==="appendTo"){this.menu.element.appendTo($(value||"body",this.element[0].ownerDocument)[0])}if(key==="disabled"&&value&&this.xhr){this.xhr.abort()}},_initSource:function(){var self=this,array,url;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term))}}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(self.xhr){self.xhr.abort()}self.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data,status){response(data)},error:function(){response([])}})}}else{this.source=this.options.source}},search:function(value,event){value=value!=null?value:this.element.val();this.term=this.element.val();if(value.length<this.options.minLength){return this.close(event)}clearTimeout(this.closing);if(this._trigger("search",event)===false){return}return this._search(value)},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:value},this._response())},_response:function(){var that=this,index=++requestIndex;return function(content){if(index===requestIndex){that.__response(content)}that.pending--;if(!that.pending){that.element.removeClass("ui-autocomplete-loading")}}},__response:function(content){if(!this.options.disabled&&content&&content.length){content=this._normalize(content);this._suggest(content);this._trigger("open")}else{this.close()}},close:function(event){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",event)}},_change:function(event){if(this.previous!==this.element.val()){this._trigger("change",event,{item:this.selectedItem})}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items}return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item}}return $.extend({label:item.label||item.value,value:item.value||item.label},item)})},_suggest:function(items){var ul=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(ul,items);this.menu.deactivate();this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next(new $.Event("mouseover"))}},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(ul,items){var self=this;$.each(items,function(index,item){self._renderItem(ul,item)})},_renderItem:function(ul,item){return $("<li></li>").data("item.autocomplete",item).append($("<a></a>").text(item.label)).appendTo(ul)},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return}if(this.menu.first()&&/^previous/.test(direction)||this.menu.last()&&/^next/.test(direction)){this.element.val(this.term);this.menu.deactivate();return}this.menu[direction](event)},widget:function(){return this.menu.element},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault()}}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value)})}})}(jQuery));(function($){$.widget("ui.menu",{_create:function(){var self=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(event){if(!$(event.target).closest(".ui-menu-item a").length){return}event.preventDefault();self.select(event)});this.refresh()},refresh:function(){var self=this;var items=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");items.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(event){self.activate(event,$(this).parent())}).mouseleave(function(){self.deactivate()})},activate:function(event,item){this.deactivate();if(this.hasScroll()){var offset=item.offset().top-this.element.offset().top,scroll=this.element.scrollTop(),elementHeight=this.element.height();if(offset<0){this.element.scrollTop(scroll+offset)}else if(offset>=elementHeight){this.element.scrollTop(scroll+offset-elementHeight+item.height())}}this.active=item.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",event,{item:item})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(event){this.move("next",".ui-menu-item:first",event)},previous:function(event){this.move("prev",".ui-menu-item:last",event)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(direction,edge,event){if(!this.active){this.activate(event,this.element.children(edge));return}var next=this.active[direction+"All"](".ui-menu-item").eq(0);if(next.length){this.activate(event,next)}else{this.activate(event,this.element.children(edge))}},nextPage:function(event){if(this.hasScroll()){if(!this.active||this.last()){this.activate(event,this.element.children(".ui-menu-item:first"));return}var base=this.active.offset().top,height=this.element.height(),result=this.element.children(".ui-menu-item").filter(function(){var close=$(this).offset().top-base-height+$(this).height();return close<10&&close>-10});if(!result.length){result=this.element.children(".ui-menu-item:last")}this.activate(event,result)}else{this.activate(event,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(event){if(this.hasScroll()){if(!this.active||this.first()){this.activate(event,this.element.children(".ui-menu-item:last"));return}var base=this.active.offset().top,height=this.element.height(),result=this.element.children(".ui-menu-item").filter(function(){var close=$(this).offset().top-base+height-$(this).height();return close<10&&close>-10});if(!result.length){result=this.element.children(".ui-menu-item:first")}this.activate(event,result)}else{this.activate(event,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[$.fn.prop?"prop":"attr"]("scrollHeight")},select:function(event){this._trigger("selected",event,{item:this.active})}})}(jQuery));;(function(c,b,a,e){var d=c(b);c.fn.lazyload=function(f){var h=this;var i;var g={threshold:200,failure_limit:10,event:"scroll",effect:"fadeIn",container:b,data_attribute:"original",skip_invisible:true,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function j(){var k=0;h.each(function(){var l=c(this);if(g.skip_invisible&&!l.is(":visible")){return}if(c.abovethetop(this,g)||c.leftofbegin(this,g)){}else{if(!c.belowthefold(this,g)&&!c.rightoffold(this,g)){l.trigger("appear");k=0}else{if(++k>g.failure_limit){return false}}}})}if(f){if(e!==f.failurelimit){f.failure_limit=f.failurelimit;delete f.failurelimit}if(e!==f.effectspeed){f.effect_speed=f.effectspeed;delete f.effectspeed}c.extend(g,f)}i=(g.container===e||g.container===b)?d:c(g.container);if(0===g.event.indexOf("scroll")){i.bind(g.event,function(){return j()})}this.each(function(){var k=this;var l=c(k);k.loaded=false;if(l.attr("src")===e||l.attr("src")===false){if(l.is("img")){l.attr("src",g.placeholder)}}l.one("appear",function(){if(!this.loaded){if(g.appear){var m=h.length;g.appear.call(k,m,g)}c("<img />").bind("load",function(){var o=l.attr("data-"+g.data_attribute);if(!o){return}l.hide();if(l.is("img")){l.attr("src",o)}else{l.css("background-image","url('"+o+"')")}l[g.effect](g.effect_speed);k.loaded=true;if(l.attr("data-spm")){UBT&&UBT.track(l.attr("data-spm"))}var n=c.grep(h,function(q){return!q.loaded});h=c(n);if(g.load){var p=h.length;g.load.call(k,p,g)}}).attr("src",l.attr("data-"+g.data_attribute))}});if(0!==g.event.indexOf("scroll")){l.bind(g.event,function(){if(!k.loaded){l.trigger("appear")}})}});d.bind("resize",function(){j()});if((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)){d.bind("pageshow",function(k){if(k.originalEvent&&k.originalEvent.persisted){h.each(function(){c(this).trigger("appear")})}})}c(a).ready(function(){j()});return this};c.belowthefold=function(g,h){var f;if(h.container===e||h.container===b){f=(b.innerHeight?b.innerHeight:d.height())+d.scrollTop()}else{f=c(h.container).offset().top+c(h.container).height()}return f<=c(g).offset().top-h.threshold};c.rightoffold=function(g,h){var f;if(h.container===e||h.container===b){f=d.width()+d.scrollLeft()}else{f=c(h.container).offset().left+c(h.container).width()}return f<=c(g).offset().left-h.threshold};c.abovethetop=function(g,h){var f;if(h.container===e||h.container===b){f=d.scrollTop()}else{f=c(h.container).offset().top}return f>=c(g).offset().top+h.threshold+c(g).height()};c.leftofbegin=function(g,h){var f;if(h.container===e||h.container===b){f=d.scrollLeft()}else{f=c(h.container).offset().left}return f>=c(g).offset().left+h.threshold+c(g).width()};c.inviewport=function(f,g){return!c.rightoffold(f,g)&&!c.leftofbegin(f,g)&&!c.belowthefold(f,g)&&!c.abovethetop(f,g)};c.extend(c.expr[":"],{"below-the-fold":function(f){return c.belowthefold(f,{threshold:0})},"above-the-top":function(f){return!c.belowthefold(f,{threshold:0})},"right-of-screen":function(f){return c.rightoffold(f,{threshold:0})},"left-of-screen":function(f){return!c.rightoffold(f,{threshold:0})},"in-viewport":function(f){return c.inviewport(f,{threshold:0})},"above-the-fold":function(f){return!c.belowthefold(f,{threshold:0})},"right-of-fold":function(f){return c.rightoffold(f,{threshold:0})},"left-of-fold":function(f){return!c.rightoffold(f,{threshold:0})}})})(jQuery,window,document);;(function(a){a.fn.sidebar=function(b){b=a.extend({min:1,fadeSpeed:200,position:"bottom",anchorOffset:0,relative:false,relativeWidth:960,backToTop:false,backContainer:"#backToTop",smooth:".smooth",overlay:false,onShow:null},b);return this.each(function(){var i=a(this),o=a.browser,c=a(window),d=a(document),g=a("body, html"),n=b.fadeSpeed,j=i.css(b.position),h=/^\d+%$/.test(j)?parseInt(parseInt(j,10)/100*c.height()):parseInt(j),m=(c.height()+b.min>=d.height())&&!b.backToTop;var e=function(){if(!!window.ActiveXObject&&!window.XMLHttpRequest){i.css({position:"absolute"});if(b.position=="bottom"){i.css({top:c.scrollTop()+c.height()-i.height()-h})}if(b.position=="top"){i.css({top:c.scrollTop()+h})}}if(c.scrollTop()>=b.min||m){i.fadeIn(n);if(typeof(b.onShow)==="function"){b.onShow()}}else{i.fadeOut(n)}};if(b.min==0||m){e()}c.on("scroll.sidebar",function(){e()});if(b.relative){var l=b.relativeWidth,f=i.width(),k=(c.width()+l)/2;i.css("left",k);c.on("resize.sidebar scroll.sidebar",function(){var p=c.width();if(b.overlay){k=(p-f*2>l)?((p+l)/2):(p-f)}else{k=(p+l)/2}i.css("left",k)})}if(b.backToTop){a(b.backContainer).click(function(){g.animate({scrollTop:0},100);return false})}i.find(b.smooth).click(function(p){var q=a(a(this).attr("href"));if(a(this).attr("href").charAt(0)=="#"&&q.length>0){p.preventDefault();g.animate({scrollTop:q.offset().top-b.anchorOffset},100)}})})}})(jQuery);;(function(a){var b={min:1,max:null,top:0,$parent:"",stickyClass:"stickybox",zIndex:999,relative:false,relativeWidth:990};a.fn.sticky=function(c){c=a.extend({},b,c);var d={};d.updateData=function(e){c=a.extend({},c,e)};return this.each(function(){var j=a(this),h=c.$parent,m=a.browser,e=a(window),f=!!window.ActiveXObject&&!window.XMLHttpRequest;j.data("stricky",d);function g(){var n=e.scrollTop();if((c.max==null&&n>=c.min)||(c.max!=null&&n>=c.min&&n<c.max)){j.addClass(c.stickyClass);if(!f){j.css({position:"fixed",top:c.top,"z-index":c.zIndex})}else{var o=h.length?c.$parent.offset().top:0;j.css({position:"absolute",top:n+c.top-o,"z-index":c.zIndex})}}else{j.removeClass(c.stickyClass).removeAttr("style")}}if(c.relative){var l=c.relativeWidth,i=j.width(),k=(e.width()+l)/2;e.on("scroll.sticky",function(){var n=e.width();j.css("left",((n+l)/2)-i)})}e.on("scroll.sticky",function(){g()})})}})(jQuery);;(function($){function Countdown(){this.regional=[];this.regional['']={labels:['Years','Months','Weeks','Days','Hours','Minutes','Seconds'],labels1:['Year','Month','Week','Day','Hour','Minute','Second'],compactLabels:['y','m','w','d'],whichLabels:null,digits:['0','1','2','3','4','5','6','7','8','9'],timeSeparator:':',isRTL:false};this._defaults={until:null,since:null,timezone:null,serverSync:null,format:'dHMS',layout:'',compact:false,significant:0,description:'',expiryUrl:'',expiryText:'',alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1};$.extend(this._defaults,this.regional['']);this._serverSyncs=[];var c=(typeof Date.now=='function'?Date.now:function(){return new Date().getTime()});var d=(window.performance&&typeof window.performance.now=='function');function timerCallBack(a){var b=(a<1e12?(d?(performance.now()+performance.timing.navigationStart):c()):a||c());if(b-f>=1000){x._updateTargets();f=b}e(timerCallBack)}var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;var f=0;if(!e||$.noRequestAnimationFrame){$.noRequestAnimationFrame=null;setInterval(function(){x._updateTargets()},980)}else{f=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||c();e(timerCallBack)}}var Y=0;var O=1;var W=2;var D=3;var H=4;var M=5;var S=6;$.extend(Countdown.prototype,{markerClassName:'hasCountdown',propertyName:'countdown',_rtlClass:'countdown_rtl',_sectionClass:'countdown_section',_amountClass:'countdown_amount',_rowClass:'countdown_row',_holdingClass:'countdown_holding',_showClass:'countdown_show',_descrClass:'countdown_descr',_timerTargets:[],setDefaults:function(a){this._resetExtraLabels(this._defaults,a);$.extend(this._defaults,a||{})},UTCDate:function(a,b,c,e,f,g,h,i){if(typeof b=='object'&&b.constructor==Date){i=b.getMilliseconds();h=b.getSeconds();g=b.getMinutes();f=b.getHours();e=b.getDate();c=b.getMonth();b=b.getFullYear()}var d=new Date();d.setUTCFullYear(b);d.setUTCDate(1);d.setUTCMonth(c||0);d.setUTCDate(e||1);d.setUTCHours(f||0);d.setUTCMinutes((g||0)-(Math.abs(a)<30?a*60:a));d.setUTCSeconds(h||0);d.setUTCMilliseconds(i||0);return d},periodsToSeconds:function(a){return a[0]*31557600+a[1]*2629800+a[2]*604800+a[3]*86400+a[4]*3600+a[5]*60+a[6]},_attachPlugin:function(a,b){a=$(a);if(a.hasClass(this.markerClassName)){return}var c={options:$.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};a.addClass(this.markerClassName).data(this.propertyName,c);this._optionPlugin(a,b)},_addTarget:function(a){if(!this._hasTarget(a)){this._timerTargets.push(a)}},_hasTarget:function(a){return($.inArray(a,this._timerTargets)>-1)},_removeTarget:function(b){this._timerTargets=$.map(this._timerTargets,function(a){return(a==b?null:a)})},_updateTargets:function(){for(var i=this._timerTargets.length-1;i>=0;i--){this._updateCountdown(this._timerTargets[i])}},_optionPlugin:function(a,b,c){a=$(a);var d=a.data(this.propertyName);if(!b||(typeof b=='string'&&c==null)){var e=b;b=(d||{}).options;return(b&&e?b[e]:b)}if(!a.hasClass(this.markerClassName)){return}b=b||{};if(typeof b=='string'){var e=b;b={};b[e]=c}if(b.layout){b.layout=b.layout.replace(/&lt;/g,'<').replace(/&gt;/g,'>')}this._resetExtraLabels(d.options,b);var f=(d.options.timezone!=b.timezone);$.extend(d.options,b);this._adjustSettings(a,d,b.until!=null||b.since!=null||f);var g=new Date();if((d._since&&d._since<g)||(d._until&&d._until>g)){this._addTarget(a[0])}this._updateCountdown(a,d)},_updateCountdown:function(a,b){var c=$(a);b=b||c.data(this.propertyName);if(!b){return}c.html(this._generateHTML(b)).toggleClass(this._rtlClass,b.options.isRTL);if($.isFunction(b.options.onTick)){var d=b._hold!='lap'?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date());if(b.options.tickInterval==1||this.periodsToSeconds(d)%b.options.tickInterval==0){b.options.onTick.apply(a,[d])}}var e=b._hold!='pause'&&(b._since?b._now.getTime()<b._since.getTime():b._now.getTime()>=b._until.getTime());if(e&&!b._expiring){b._expiring=true;if(this._hasTarget(a)||b.options.alwaysExpire){this._removeTarget(a);if($.isFunction(b.options.onExpiry)){b.options.onExpiry.apply(a,[])}if(b.options.expiryText){var f=b.options.layout;b.options.layout=b.options.expiryText;this._updateCountdown(a,b);b.options.layout=f}if(b.options.expiryUrl){window.location=b.options.expiryUrl}}b._expiring=false}else if(b._hold=='pause'){this._removeTarget(a)}c.data(this.propertyName,b)},_resetExtraLabels:function(a,b){var c=false;for(var n in b){if(n!='whichLabels'&&n.match(/[Ll]abels/)){c=true;break}}if(c){for(var n in a){if(n.match(/[Ll]abels[02-9]|compactLabels1/)){a[n]=null}}}},_adjustSettings:function(a,b,c){var d;var e=0;var f=null;for(var i=0;i<this._serverSyncs.length;i++){if(this._serverSyncs[i][0]==b.options.serverSync){f=this._serverSyncs[i][1];break}}if(f!=null){e=(b.options.serverSync?f:0);d=new Date()}else{var g=($.isFunction(b.options.serverSync)?b.options.serverSync.apply(a,[]):null);d=new Date();e=(g?d.getTime()-g.getTime():0);this._serverSyncs.push([b.options.serverSync,e])}var h=b.options.timezone;h=(h==null?-d.getTimezoneOffset():h);if(c||(!c&&b._until==null&&b._since==null)){b._since=b.options.since;if(b._since!=null){b._since=this.UTCDate(h,this._determineTime(b._since,null));if(b._since&&e){b._since.setMilliseconds(b._since.getMilliseconds()+e)}}b._until=this.UTCDate(h,this._determineTime(b.options.until,d));if(e){b._until.setMilliseconds(b._until.getMilliseconds()+e)}}b._show=this._determineShow(b)},_destroyPlugin:function(a){a=$(a);if(!a.hasClass(this.markerClassName)){return}this._removeTarget(a[0]);a.removeClass(this.markerClassName).empty().removeData(this.propertyName)},_pausePlugin:function(a){this._hold(a,'pause')},_lapPlugin:function(a){this._hold(a,'lap')},_resumePlugin:function(a){this._hold(a,null)},_hold:function(a,b){var c=$.data(a,this.propertyName);if(c){if(c._hold=='pause'&&!b){c._periods=c._savePeriods;var d=(c._since?'-':'+');c[c._since?'_since':'_until']=this._determineTime(d+c._periods[0]+'y'+d+c._periods[1]+'o'+d+c._periods[2]+'w'+d+c._periods[3]+'d'+d+c._periods[4]+'h'+d+c._periods[5]+'m'+d+c._periods[6]+'s');this._addTarget(a)}c._hold=b;c._savePeriods=(b=='pause'?c._periods:null);$.data(a,this.propertyName,c);this._updateCountdown(a,c)}},_getTimesPlugin:function(a){var b=$.data(a,this.propertyName);return(!b?null:(b._hold=='pause'?b._savePeriods:(!b._hold?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date()))))},_determineTime:function(k,l){var m=function(a){var b=new Date();b.setTime(b.getTime()+a*1000);return b};var n=function(a){a=a.toLowerCase();var b=new Date();var c=b.getFullYear();var d=b.getMonth();var e=b.getDate();var f=b.getHours();var g=b.getMinutes();var h=b.getSeconds();var i=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var j=i.exec(a);while(j){switch(j[2]||'s'){case's':h+=parseInt(j[1],10);break;case'm':g+=parseInt(j[1],10);break;case'h':f+=parseInt(j[1],10);break;case'd':e+=parseInt(j[1],10);break;case'w':e+=parseInt(j[1],10)*7;break;case'o':d+=parseInt(j[1],10);e=Math.min(e,x._getDaysInMonth(c,d));break;case'y':c+=parseInt(j[1],10);e=Math.min(e,x._getDaysInMonth(c,d));break}j=i.exec(a)}return new Date(c,d,e,f,g,h,0)};var o=(k==null?l:(typeof k=='string'?n(k):(typeof k=='number'?m(k):k)));if(o)o.setMilliseconds(0);return o},_getDaysInMonth:function(a,b){return 32-new Date(a,b,32).getDate()},_normalLabels:function(a){return a},_generateHTML:function(c){var d=this;c._periods=(c._hold?c._periods:this._calculatePeriods(c,c._show,c.options.significant,new Date()));var e=false;var f=0;var g=c.options.significant;var h=$.extend({},c._show);for(var i=Y;i<=S;i++){e|=(c._show[i]=='?'&&c._periods[i]>0);h[i]=(c._show[i]=='?'&&!e?null:c._show[i]);f+=(h[i]?1:0);g-=(c._periods[i]>0?1:0)}var j=[false,false,false,false,false,false,false];for(var i=S;i>=Y;i--){if(c._show[i]){if(c._periods[i]){j[i]=true}else{j[i]=g>0;g--}}}var k=(c.options.compact?c.options.compactLabels:c.options.labels);var l=c.options.whichLabels||this._normalLabels;var m=function(a){var b=c.options['compactLabels'+l(c._periods[a])];return(h[a]?d._translateDigits(c,c._periods[a])+(b?b[a]:k[a])+' ':'')};var n=function(a){var b=c.options['labels'+l(c._periods[a])];return((!c.options.significant&&h[a])||(c.options.significant&&j[a])?'<span class="'+x._sectionClass+'">'+'<span class="'+x._amountClass+'">'+d._translateDigits(c,c._periods[a])+'</span><br/>'+(b?b[a]:k[a])+'</span>':'')};return(c.options.layout?this._buildLayout(c,h,c.options.layout,c.options.compact,c.options.significant,j):((c.options.compact?'<span class="'+this._rowClass+' '+this._amountClass+(c._hold?' '+this._holdingClass:'')+'">'+m(Y)+m(O)+m(W)+m(D)+(h[H]?this._minDigits(c,c._periods[H],2):'')+(h[M]?(h[H]?c.options.timeSeparator:'')+this._minDigits(c,c._periods[M],2):'')+(h[S]?(h[H]||h[M]?c.options.timeSeparator:'')+this._minDigits(c,c._periods[S],2):''):'<span class="'+this._rowClass+' '+this._showClass+(c.options.significant||f)+(c._hold?' '+this._holdingClass:'')+'">'+n(Y)+n(O)+n(W)+n(D)+n(H)+n(M)+n(S))+'</span>'+(c.options.description?'<span class="'+this._rowClass+' '+this._descrClass+'">'+c.options.description+'</span>':'')))},_buildLayout:function(c,d,e,f,g,h){var j=c.options[f?'compactLabels':'labels'];var k=c.options.whichLabels||this._normalLabels;var l=function(a){return(c.options[(f?'compactLabels':'labels')+k(c._periods[a])]||j)[a]};var m=function(a,b){return c.options.digits[Math.floor(a/b)%10]};var o={desc:c.options.description,sep:c.options.timeSeparator,yl:l(Y),yn:this._minDigits(c,c._periods[Y],1),ynn:this._minDigits(c,c._periods[Y],2),ynnn:this._minDigits(c,c._periods[Y],3),y1:m(c._periods[Y],1),y10:m(c._periods[Y],10),y100:m(c._periods[Y],100),y1000:m(c._periods[Y],1000),ol:l(O),on:this._minDigits(c,c._periods[O],1),onn:this._minDigits(c,c._periods[O],2),onnn:this._minDigits(c,c._periods[O],3),o1:m(c._periods[O],1),o10:m(c._periods[O],10),o100:m(c._periods[O],100),o1000:m(c._periods[O],1000),wl:l(W),wn:this._minDigits(c,c._periods[W],1),wnn:this._minDigits(c,c._periods[W],2),wnnn:this._minDigits(c,c._periods[W],3),w1:m(c._periods[W],1),w10:m(c._periods[W],10),w100:m(c._periods[W],100),w1000:m(c._periods[W],1000),dl:l(D),dn:this._minDigits(c,c._periods[D],1),dnn:this._minDigits(c,c._periods[D],2),dnnn:this._minDigits(c,c._periods[D],3),d1:m(c._periods[D],1),d10:m(c._periods[D],10),d100:m(c._periods[D],100),d1000:m(c._periods[D],1000),hl:l(H),hn:this._minDigits(c,c._periods[H],1),hnn:this._minDigits(c,c._periods[H],2),hnnn:this._minDigits(c,c._periods[H],3),h1:m(c._periods[H],1),h10:m(c._periods[H],10),h100:m(c._periods[H],100),h1000:m(c._periods[H],1000),ml:l(M),mn:this._minDigits(c,c._periods[M],1),mnn:this._minDigits(c,c._periods[M],2),mnnn:this._minDigits(c,c._periods[M],3),m1:m(c._periods[M],1),m10:m(c._periods[M],10),m100:m(c._periods[M],100),m1000:m(c._periods[M],1000),sl:l(S),sn:this._minDigits(c,c._periods[S],1),snn:this._minDigits(c,c._periods[S],2),snnn:this._minDigits(c,c._periods[S],3),s1:m(c._periods[S],1),s10:m(c._periods[S],10),s100:m(c._periods[S],100),s1000:m(c._periods[S],1000)};var p=e;for(var i=Y;i<=S;i++){var q='yowdhms'.charAt(i);var r=new RegExp('\\{'+q+'<\\}([\\s\\S]*)\\{'+q+'>\\}','g');p=p.replace(r,((!g&&d[i])||(g&&h[i])?'$1':''))}$.each(o,function(n,v){var a=new RegExp('\\{'+n+'\\}','g');p=p.replace(a,v)});return p},_minDigits:function(a,b,c){b=''+b;if(b.length>=c){return this._translateDigits(a,b)}b='0000000000'+b;return this._translateDigits(a,b.substr(b.length-c))},_translateDigits:function(b,c){return(''+c).replace(/[0-9]/g,function(a){return b.options.digits[a]})},_determineShow:function(a){var b=a.options.format;var c=[];c[Y]=(b.match('y')?'?':(b.match('Y')?'!':null));c[O]=(b.match('o')?'?':(b.match('O')?'!':null));c[W]=(b.match('w')?'?':(b.match('W')?'!':null));c[D]=(b.match('d')?'?':(b.match('D')?'!':null));c[H]=(b.match('h')?'?':(b.match('H')?'!':null));c[M]=(b.match('m')?'?':(b.match('M')?'!':null));c[S]=(b.match('s')?'?':(b.match('S')?'!':null));return c},_calculatePeriods:function(c,d,e,f){c._now=f;c._now.setMilliseconds(0);var g=new Date(c._now.getTime());if(c._since){if(f.getTime()<c._since.getTime()){c._now=f=g}else{f=c._since}}else{g.setTime(c._until.getTime());if(f.getTime()>c._until.getTime()){c._now=f=g}}var h=[0,0,0,0,0,0,0];if(d[Y]||d[O]){var i=x._getDaysInMonth(f.getFullYear(),f.getMonth());var j=x._getDaysInMonth(g.getFullYear(),g.getMonth());var k=(g.getDate()==f.getDate()||(g.getDate()>=Math.min(i,j)&&f.getDate()>=Math.min(i,j)));var l=function(a){return(a.getHours()*60+a.getMinutes())*60+a.getSeconds()};var m=Math.max(0,(g.getFullYear()-f.getFullYear())*12+g.getMonth()-f.getMonth()+((g.getDate()<f.getDate()&&!k)||(k&&l(g)<l(f))?-1:0));h[Y]=(d[Y]?Math.floor(m/12):0);h[O]=(d[O]?m-h[Y]*12:0);f=new Date(f.getTime());var n=(f.getDate()==i);var o=x._getDaysInMonth(f.getFullYear()+h[Y],f.getMonth()+h[O]);if(f.getDate()>o){f.setDate(o)}f.setFullYear(f.getFullYear()+h[Y]);f.setMonth(f.getMonth()+h[O]);if(n){f.setDate(o)}}var p=Math.floor((g.getTime()-f.getTime())/1000);var q=function(a,b){h[a]=(d[a]?Math.floor(p/b):0);p-=h[a]*b};q(W,604800);q(D,86400);q(H,3600);q(M,60);q(S,1);if(p>0&&!c._since){var r=[1,12,4.3482,7,24,60,60];var s=S;var t=1;for(var u=S;u>=Y;u--){if(d[u]){if(h[s]>=t){h[s]=0;p=1}if(p>0){h[u]++;p=0;s=u;t=1}}t*=r[u]}}if(e){for(var u=Y;u<=S;u++){if(e&&h[u]){e--}else if(!e){h[u]=0}}}return h}});var w=['getTimes'];function isNotChained(a,b){if(a=='option'&&(b.length==0||(b.length==1&&typeof b[0]=='string'))){return true}return $.inArray(a,w)>-1}$.fn.countdown=function(a){var b=Array.prototype.slice.call(arguments,1);if(isNotChained(a,b)){return x['_'+a+'Plugin'].apply(x,[this[0]].concat(b))}return this.each(function(){if(typeof a=='string'){if(!x['_'+a+'Plugin']){throw'Unknown command: '+a;}x['_'+a+'Plugin'].apply(x,[this].concat(b))}else{x._attachPlugin(this,a||{})}})};var x=$.countdown=new Countdown()})(jQuery);;(function($){$.countdown.regional['zh-CN']={labels:['年','月','周','天','时','分','秒'],labels1:['年','月','周','天','时','分','秒'],compactLabels:['年','月','周','天'],compactLabels1:['年','月','周','天'],whichLabels:null,digits:['0','1','2','3','4','5','6','7','8','9'],timeSeparator:':',isRTL:false};$.countdown.setDefaults($.countdown.regional['zh-CN']);})(jQuery);;(function(a){a.tools=a.tools||{version:"v1.2.6"},a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:100,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,c,d){b[a]=[c,d]}};var b={toggle:[function(a){var b=this.getConf(),c=this.getTip(),d=b.opacity;d<1&&c.css({opacity:d}),c.show(),a.call()},function(a){this.getTip().hide(),a.call()}],fade:[function(b){var c=this.getConf();!a.browser.msie||c.fadeIE?this.getTip().fadeTo(c.fadeInSpeed,c.opacity,b):(this.getTip().show(),b())},function(b){var c=this.getConf();!a.browser.msie||c.fadeIE?this.getTip().fadeOut(c.fadeOutSpeed,b):(this.getTip().hide(),b())}]};function c(b,c,d){var e=d.relative?b.position().top:b.offset().top,f=d.relative?b.position().left:b.offset().left,g=d.position[0];e-=c.outerHeight()-d.offset[0],f+=b.outerWidth()+d.offset[1],/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());var h=c.outerHeight()+b.outerHeight();g=="center"&&(e+=h/2),g=="bottom"&&(e+=h),g=d.position[1];var i=c.outerWidth()+b.outerWidth();g=="center"&&(f-=i/2),g=="left"&&(f-=i);return{top:e,left:f}}function d(d,e){var f=this,g=d.add(f),h,i=0,j=0,k=d.attr("title"),l=d.attr("data-tooltip"),m=b[e.effect],n,o=d.is(":input"),p=o&&d.is(":checkbox, :radio, select, :button, :submit"),q=d.attr("type"),r=e.events[q]||e.events[o?p?"widget":"input":"def"];if(!m)throw"Nonexistent effect \""+e.effect+"\"";r=r.split(/,\s*/);if(r.length!=2)throw"Tooltip: bad events configuration for "+q;d.bind(r[0],function(a){clearTimeout(i),e.predelay?j=setTimeout(function(){f.show(a)},e.predelay):f.show(a)}).bind(r[1],function(a){clearTimeout(j),e.delay?i=setTimeout(function(){f.hide(a)},e.delay):f.hide(a)}),k&&e.cancelDefault&&(d.removeAttr("title"),d.data("title",k)),a.extend(f,{show:function(b){if(!h){l?h=a(l):e.tip?h=a(e.tip).eq(0):k?h=a(e.layout).addClass(e.tipClass).appendTo(document.body).hide().append(k):(h=d.next(),h.length||(h=d.parent().next()));if(!h.length)throw"Cannot find tooltip for "+d}if(f.isShown())return f;h.stop(!0,!0);var o=c(d,h,e);e.tip&&h.html(d.data("title")),b=a.Event(),b.type="onBeforeShow",g.trigger(b,[o]);if(b.isDefaultPrevented())return f;o=c(d,h,e),h.css({position:"absolute",top:o.top,left:o.left}),n=!0,m[0].call(f,function(){b.type="onShow",n="full",g.trigger(b)});var p=e.events.tooltip.split(/,\s*/);h.data("__set")||(h.unbind(p[0]).bind(p[0],function(){clearTimeout(i),clearTimeout(j)}),p[1]&&!d.is("input:not(:checkbox, :radio), textarea")&&h.unbind(p[1]).bind(p[1],function(a){a.relatedTarget!=d[0]&&d.trigger(r[1].split(" ")[0])}),e.tip||h.data("__set",!0));return f},hide:function(c){if(!h||!f.isShown())return f;c=a.Event(),c.type="onBeforeHide",g.trigger(c);if(!c.isDefaultPrevented()){n=!1,b[e.effect][1].call(f,function(){c.type="onHide",g.trigger(c)});return f}},isShown:function(a){return a?n=="full":n},getConf:function(){return e},getTip:function(){return h},getTrigger:function(){return d}}),a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(b,c){a.isFunction(e[c])&&a(f).bind(c,e[c]),f[c]=function(b){b&&a(f).bind(c,b);return f}})}a.fn.tooltip=function(b){var c=this.data("tooltip");if(c)return c;b=a.extend(!0,{},a.tools.tooltip.conf,b),typeof b.position=="string"&&(b.position=b.position.split(/,?\s/)),this.each(function(){c=new d(a(this),b),a(this).data("tooltip",c)});return b.api?c:this}})(jQuery);(function(a){var b=a.tools.tooltip;b.dynamic={conf:{classNames:"top right bottom left"}};function c(b){var c=a(window),d=c.width()+c.scrollLeft(),e=c.height()+c.scrollTop();return[b.offset().top<=c.scrollTop(),d<=b.offset().left+b.width(),e<=b.offset().top+b.height(),c.scrollLeft()>=b.offset().left]}function d(a){var b=a.length;while(b--)if(a[b])return!1;return!0}a.fn.dynamic=function(e){typeof e=="number"&&(e={speed:e}),e=a.extend({},b.dynamic.conf,e);var f=a.extend(!0,{},e),g=e.classNames.split(/\s/),h;this.each(function(){var b=a(this).tooltip().onBeforeShow(function(b,e){var i=this.getTip(),j=this.getConf();h||(h=[j.position[0],j.position[1],j.offset[0],j.offset[1],a.extend({},j)]),a.extend(j,h[4]),j.position=[h[0],h[1]],j.offset=[h[2],h[3]],i.css({visibility:"hidden",position:"absolute",top:e.top,left:e.left}).show();var k=a.extend(!0,{},f),l=c(i);if(!d(l)){l[2]&&(a.extend(j,k.top),j.position[0]="top",i.addClass(g[0])),l[3]&&(a.extend(j,k.right),j.position[1]="right",i.addClass(g[1])),l[0]&&(a.extend(j,k.bottom),j.position[0]="bottom",i.addClass(g[2])),l[1]&&(a.extend(j,k.left),j.position[1]="left",i.addClass(g[3]));if(l[0]||l[2])j.offset[0]*=-1;if(l[1]||l[3])j.offset[1]*=-1}i.css({visibility:"visible"}).hide()});b.onBeforeShow(function(){var a=this.getConf(),b=this.getTip();setTimeout(function(){a.position=[h[0],h[1]],a.offset=[h[2],h[3]]},0)}),b.onHide(function(){var a=this.getTip();a.removeClass(e.classNames)}),ret=b});return e.api?ret:this}})(jQuery);(function(a){var b=a.tools.tooltip;a.extend(b.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!a.browser.msie});var c={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};b.addEffect("slide",function(a){var b=this.getConf(),d=this.getTip(),e=b.slideFade?{opacity:b.opacity}:{},f=c[b.direction]||c.up;e[f[1]]=f[0]+"="+b.slideOffset,b.slideFade&&d.css({opacity:0}),d.show().animate(e,b.slideInSpeed,a)},function(b){var d=this.getConf(),e=d.slideOffset,f=d.slideFade?{opacity:0}:{},g=c[d.direction]||c.up,h=""+g[0];d.bounce&&(h=h=="+"?"-":"+"),f[g[1]]=h+"="+e,this.getTip().animate(f,d.slideOutSpeed,function(){a(this).hide(),b.call()})})})(jQuery);;(function(a){a.tools=a.tools||{version:"v1.2.6"};var b;b=a.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",bgiframe:false,closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.6,startOpacity:0,color:"#000",onLoad:null,onClose:null}};function c(){if(a.browser.msie){var b=a(document).height(),c=a(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b-c<20?c:b]}return[a(document).width(),a(document).height()]}function d(b){if(b)return b.call(a.mask)}var e,f,g,h,i;a.mask={load:function(j,k){if(g)return this;typeof j=="string"&&(j={color:j}),j=j||h,h=j=a.extend(a.extend({},b.conf),j),e=a("#"+j.maskId),e.length||(e=a("<div/>").attr("id",j.maskId),a("body").append(e));var l=c();e.css({position:"absolute",top:0,left:0,width:l[0],height:l[1],display:"none",zIndex:j.zIndex});if(d(j.onBeforeLoad)===!1)return this;if(j.bgiframe&&a.fn.bgiframe)e.bgiframe();j.closeOnEsc&&a(document).bind("keydown.mask",function(b){b.keyCode==27&&a.mask.close(b)}),j.closeOnClick&&e.bind("click.mask",function(b){a.mask.close(b)}),a(window).bind("resize.mask scroll.mask",function(){a.mask.fit()}),k&&k.length&&(i=k.eq(0).css("zIndex"),a.each(k,function(){var b=a(this);/relative|absolute|fixed/i.test(b.css("position"))||b.css("position","relative")}),f=k.css({zIndex:Math.max(j.zIndex+1,i=="auto"?0:i)})),setTimeout(function(){e.css({display:"block"}),a.mask.fit(),d(j.onLoad),g="full"},j.loadSpeed-20),g=!0;return this},close:function(){if(g){if(d(h.onBeforeClose)===!1)return this;e.fadeOut(h.closeSpeed,function(){d(h.onClose),f&&f.css({zIndex:i}),g=!1}),a(document).unbind("keydown.mask"),e.unbind("click.mask"),a(window).unbind("resize.mask")}return this},fit:function(){if(g){var a=c();e.css({width:a[0],height:a[1]})}},getMask:function(){return e},isLoaded:function(a){return a?g=="full":g},getConf:function(){return h},getExposed:function(){return f}},a.fn.mask=function(b){a.mask.load(b);return this},a.fn.expose=function(b){a.mask.load(b,this);return this}})(jQuery);;(function(c){c.tools=c.tools||{version:"@VERSION"};c.tools.overlay={addEffect:function(e,f,g){b[e]=[f,g]},conf:{close:null,closeOnClick:false,closeOnEsc:false,closeSpeed:"fast",effect:"default",fixed:!c.browser.msie||c.browser.version>6,left:"center",load:false,mask:"#000",oneInstance:true,speed:"fast",target:null,top:"10%"}};var d=[],b={};c.tools.overlay.addEffect("default",function(i,h){var g=this.getConf(),e=c(window),f=this.getOverlay();if(g.fixed&&f.height()+i.top<e.height()){i.position="fixed"}else{i.top+=e.scrollTop();i.left+=e.scrollLeft();i.position="absolute"}f.css(i).fadeIn(g.speed,h)},function(e){this.getOverlay().fadeOut(this.getConf().closeSpeed,e)});function a(h,m){var o=this,f=h.add(o),n=c(window),k,j,i,e=c.tools.expose&&(m.mask||m.expose),l=Math.random().toString().slice(10);if(e){if(typeof e=="string"){e={color:e}}e.closeOnClick=e.closeOnEsc=false}var g=m.target||h.attr("rel");j=g?c(g):null||h;if(!j.length){throw"Could not find Overlay: "+g}if(h&&h.index(j)==-1){h.click(function(p){o.load(p);return p.preventDefault()})}c.extend(o,{load:function(v){var q,w;if(o.isOpened()){return o}var s=b[m.effect];if(!s){throw'Overlay: cannot find effect : "'+m.effect+'"'}if(m.oneInstance){c.each(d,function(){this.close(v)})}q=o.getOverlay();w=q.find("img[data-original]");if(w.length){w.each(function(){var x=c(this),y=x.attr("data-original");x.attr("src",y).removeAttr("data-original")})}v=v||c.Event();v.type="onBeforeLoad";f.trigger(v);if(v.isDefaultPrevented()){return o}i=true;if(e){c(j).expose(e)}var u=m.top,t=m.left,p=j.outerWidth(true),r=j.outerHeight(true);if(typeof u=="string"){u=u=="center"?Math.max((n.height()-r)/2,0):parseInt(u,10)/100*n.height()}if(t=="center"){t=Math.max((n.width()-p)/2,0)}s[0].call(o,{top:u,left:t},function(){if(i){v.type="onLoad";f.trigger(v)}});if(e&&m.closeOnClick){c.mask.getMask().one("click",o.close)}if(m.closeOnClick){c(document).on("click."+l,function(x){if(!c(x.target).parents(j).length){o.close(x)}})}if(m.closeOnEsc){c(document).on("keydown."+l,function(x){if(x.keyCode==27){o.close(x)}})}return o},close:function(p){if(!o.isOpened()){return o}p=p||c.Event();p.type="onBeforeClose";f.trigger(p);if(p.isDefaultPrevented()){return}i=false;b[m.effect][1].call(o,function(){p.type="onClose";f.trigger(p)});c(document).off("click."+l+" keydown."+l);if(e){c.mask.close()}return o},getOverlay:function(){return j},getTrigger:function(){return h},getClosers:function(){return k},isOpened:function(){return i},getConf:function(){return m}});n.on("resize",function(){var p=o.getOverlay();p.css("left",(n.width()-p.width())/2+"px")});c.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(q,p){if(c.isFunction(m[p])){c(o).on(p,m[p])}o[p]=function(r){if(r){c(o).on(p,r)}return o}});colsersSelector=m.close||".close";k=j.find(colsersSelector);if(!k.length&&!m.close){k=c('<a class="close"></a>');j.prepend(k)}j.on("click",colsersSelector,function(p){o.close(p)});if(m.load){o.load()}}c.fn.overlay=function(e){var f=this.data("overlay");if(f){return f}if(c.isFunction(e)){e={onBeforeLoad:e}}e=c.extend(true,{},c.tools.overlay.conf,e);this.each(function(){f=new a(c(this),e);d.push(f);c(this).data("overlay",f)});return e.api?f:this}})(jQuery);;(function($){function rebuildMarkCode(adid){var markCodeCookie="markcode";var markCodeValue="markcode".getCookie();var execArr=/^([^\.]+)\.([^\.]+)\.([^\.]+)\.([^\.]+)$/gi.exec(markCodeValue);if(!markCodeValue||!execArr){markCodeCookie.setCookie("0.0.{0}.1".format(adid),0,Fanli.Utility.rootDomain,"/")}else{markCodeCookie.setCookie("{0}.{1}.{2}.{3}".format(execArr[1],execArr[2],adid,$.isNumeric(execArr[4])?parseInt(execArr[4])+1:1,0),0,Fanli.Utility.rootDomain,"/")}}$.fanliAdTrack={viewEvent:function(id){if(typeof id!="undefined"){UBT.track("event","view","id",id)}},clickEvent:function(id){if(typeof id!="undefined"){UBT.track("event","click","id",id);rebuildMarkCode(id)}}};$.fn.adtracker=function(settings){settings=$.extend({clickQuery:".fa-link",viewQuery:".fa-img"},settings);return this.each(function(){var $this=$(this);$this.on("click",settings.viewQuery,function(){var $this=$(this);var id=$this.closest(settings.clickQuery).data("id")||$this.data("id");$.fanliAdTrack.clickEvent(id)});$this.find(settings.viewQuery).each(function(){var $this=$(this);var id=$this.closest(settings.clickQuery).data("id")||$this.data("id");$.fanliAdTrack.viewEvent(id)})})};$.fn.adloader=function(settings){settings=$.extend({name:null,type:null,href:true,div:false,width:null,height:null,onReady:null,onLoad:null,onError:null},settings);return this.each(function(){var $this=$(this);var prefix="//event.fanli.com/proxy.php?key=";var adName=settings.name||$this.data("name");var adType=settings.type||$this.data("type");var adWidth=settings.width||$this.data("width");var adHeight=settings.height||$this.data("height");var adHref=settings.href;var adDiv=settings.div;var adUrl=prefix+adName+"&stamp="+parseInt((new Date).getTime()/3e5);function renderList(json){var html=[];var len=json.length;for(i=0;i<len;i++){var it=json[i];var href=it.link;var chkHref=adHref&&it.link!="";if(it.file!=""){if(chkHref){html.push('<a href="',href,'" data-id="',it.id,'" class="fa-link J_spm_fa_link" target="_blank" rel="nofollow">')}else if(adDiv){html.push('<div class="fa-link" data-id="',it.id,'">')}html.push('<img src="',it.file,'"');if(adWidth&&adHeight){html.push(' width="',adWidth,'" height="',adHeight,'"')}html.push(' alt="',it.name,'" class="fa-img" />')}else{if(chkHref){html.push('<a href="',href,'" data-id="',it.id,'" class="fa-text J_spm_fa_link" target="_blank" rel="nofollow">')}else if(adDiv){html.push('<div class="fa-link" data-id="',it.id,'">')}html.push(it.name)}if(chkHref){html.push("</a>")}else if(adDiv){html.push("</div>")}$.fanliAdTrack.viewEvent(it.id)}html=html.join("");$this.append(html)}function renderRandom(json){var html=[];var len=json.length;var i=Math.ceil(Math.random()*len);var it=json[i-1];var chkHref=adHref&&it.link!="";var href=it.link;if(chkHref){html.push('<a href="',href,'" data-id="',it.id,'" class="fa-link J_spm_fa_link" target="_blank" rel="nofollow">')}else if(adDiv){html.push('<div class="fa-link" data-id="',it.id,'">')}html.push('<img src="',it.file,'"');if(adWidth&&adHeight){html.push(' width="',adWidth,'" height="',adHeight,'"')}html.push(' alt="',it.name,'" class="fa-img" />');if(chkHref){html.push("</a>")}else if(adDiv){html.push("</div>")}$.fanliAdTrack.viewEvent(it.id);html=html.join("");$this.append(html)}function build(){var json=[];try{eval("json = "+adName+"Json;");if(json.length>0){if(adType=="random"){renderRandom(json)}else{renderList(json)}if(settings.onReady!=null){settings.onReady()}if(settings.onLoad!=null){$this.find("img:last").load(function(){settings.onLoad()})}}else{$this.hide();if(settings.onError!=null){settings.onError()}}}catch(e){if(window.console){console.warn("Hosts error(event.fanli.com)??")}}}if(window.head){head.js(adUrl,function(){build()})}else{$.ajax({url:adUrl,dataType:"script",cache:true,success:function(){build()}})}})};function bindTrackEvents(){$(".J-adtracker, .J_adtracker").adtracker();$(".J_spm_fa_link").on("click",function(){var id=$(this).data("id");if(id){UBT.track("event","click","id",id);rebuildMarkCode(id)}})}if(typeof wagv!="undefined"&&wagv.pageJsLoadedCallbackArr){wagv.pageJsLoadedCallbackArr.push(function(){bindTrackEvents()})}else{$(window).on("load",function(){bindTrackEvents()})}})(typeof jQuery!="undefined"?jQuery:window.Zepto);;(function($)
{var defaults={sInputSelector:"#search-field",apiUrl:"//fun.fanli.com/api/search/searchshop",selectedClass:"ui-state-hover",sHiddenSelector:"#J_url",dUrlHiddenSelector:"#J_durl"};$.extend({flSearch:function(options){var settings=$.extend(true,{},defaults,options);var $sInput=$(settings.sInputSelector);var $form=$sInput.closest("form");var $vh=$(settings.sHiddenSelector);var $durlh=$(settings.dUrlHiddenSelector);var currentMenuItem={};var isSelectedRedirect=0;var $taobaoTips=$("<div class='hp_taobao_71_tips' style='width:{0}px;' id='J_taobao_71_tips'>淘宝/天猫宝贝不能使用链接搜索！请复制宝贝标题进行搜索！</div>".format($sInput.outerWidth(true)-30-2));var searchFlag=false;var $erOverlay;var filterKey=$sInput.data("yyg_keyword");var filterArray=filterKey&&$sInput.attr("data-yyg_keyword").indexOf(",")>0?filterKey.split(","):[];var $s8TipsPopup;bindBehavior();bindS8SearchOverlay();function bindBehavior(){if($.fn.placeholder){$sInput.placeholder({type:'label',klass:'search-placeholder'});}
$sInput.on("input.autocomplete",function(){currentMenuItem={};$sInput.trigger('keydown.autocomplete');}).autocomplete({source:function(request,response){var painVal=$.trim(request.term);if(!painVal){$(".ui-autocomplete").hide();$("#J_taobao_71_tips").hide();return;}
if(/(taobao|tmall){1}\.com/g.test(painVal)){if($("#J_taobao_71_tips").length==0){$taobaoTips.appendTo($sInput.parent());}
else{$("#J_taobao_71_tips").show();}
$(".ui-autocomplete").hide();return;}else{$("#J_taobao_71_tips").hide();}
sourceSetting(request,response,painVal);},select:function(event,ui){selectSetting(event,ui);return false;},focus:function(event,ui){focusSetting(event,ui);return false;},position:{offset:"-2 1"},appendTo:"#suggestmenu",minLength:1,autoSubmitViaEnter:1}).data("autocomplete")._renderItem=function(ul,item){return renderItem(ul,item);};$sInput.on("click",function(ev){var kc=ev.keyCode;if(kc&&(kc==38||kc==40)){return;}
currentMenuItem={};$sInput.data("autocomplete")._search($sInput.val());});$form.on("submit",submitHandler);$("#suggestmenu").delegate(".{0}".format(settings.selectedClass),"mousedown",function(event){isSelectedRedirect=1;});}
function buildErOverlay(){if(!$.tools.overlay){return false;}
var erHtml=new StringBuilder();erHtml.append('<div class="yahei popover">').append('    <div class="pop-header"><h3 class="pop-title">返利网温馨提示</h3><a href="javascript:void(0);" class="close">&times;</a></div>').append('    <div><img src="//static2.51fanli.net/common/images/header/er.png" alt="扫码下载APP参与1元购活动实际只花1块钱" /></div>').append('</div>');$erOverlay=$(erHtml.toString()).appendTo("body").overlay({top:"20%",api:true,fixed:false,onLoad:function(){UBT.track("top_serach_er_open","pc","wd-{0}".format($.trim($sInput.val())));},onClose:function(){UBT.track("top_serach_er_close","pc","wd-{0}".format($.trim($sInput.val())));}});$erOverlay.load();}
function bindS8SearchOverlay(){if(!("header-tbs8pop".getCookie()>0)){$.getJSON("//fun.fanli.com/topheader/ajaxCheckHeaderPop?jsoncallback=?",function(res){if(res.status==1){Fanli.Utility.requirejs(["overlay","expose"],function(){var aHtml=new StringBuilder();aHtml.append('<div id="J_tb_s8_pop" class="yahei tb-s8-popover" style="display:none;">').append('<div class="pop-header"><h3 class="pop-title">返利网温馨提示</h3><a href="javascript:void(0);" class="close">&times;</a></div>').append('<div class="pop-content">').append('<p class="tbpop-h2">亲~您将跳到<span class="red">爱淘宝</span>~</p>').append('<p class="tbpop-h3">淘宝返利升级了！搜索结果都有返利哦~</p>').append('<p class="tb-pop-btndiv"><a id="J_tb_s8_confirm" href="javascript:void(0);" class="tb-pop-btn">确定</a> <label><input id="J_tb_s8_checkbox" type="checkbox" class="confirm-tb-nopop"/>不再提示</label></p>').append('</div>').append('</div>');$s8TipsPopup=$(aHtml.toString()).appendTo("body").overlay({top:"20%",api:true});$("#J_tb_s8_confirm").on("click",function(ev){ev.preventDefault();if($("#J_tb_s8_checkbox").prop("checked")){$.getJSON("//fun.fanli.com/topheader/ajaxSetHeaderPop?jsoncallback=?");}
searchFlag=true;$s8TipsPopup.close();$form.submit();});$("#J_tb_s8_pop").find('.close').click(function(ev){ev.preventDefault();searchFlag=true;$s8TipsPopup.close();$form.submit();});});}});}}
function sourceSetting(request,response,searchValue){$.getCacheJSONP(settings.apiUrl+'?jsoncallback=?',{'keywords':searchValue},function(result){response(buildSearchResult(result,searchValue));});}
function focusSetting(event,ui){var item=ui.item;if(item.idx>0){$("#suggestmenu li a:eq(0)").removeClass(settings.selectedClass);}}
function selectSetting(event,ui){var item=ui.item;currentMenuItem=item;$sInput.val(item.val);$vh.val(item.url);if(isSelectedRedirect==1){isSelectedRedirect=0;$form.trigger("submit");}}
function renderItem(ul,item){var sb=new StringBuilder();var $li=!item.isadvise?$("<li class='stitleli'></li>"):$("<li class='sitemli'></li>");var $a=$("<a href='javascript:void(0);'></a>");if(item.hasspace){$a.addClass("sitem");}
if(item.idx==0){$a.addClass(settings.selectedClass);}
sb.append(item.benefit?"<span class='hasfl'>{0}</span>".format(item.benefit):"").append(item.icon?"<span style='_float:left;vertical-align:middle;margin:-2px 4px 0 0;_margin-top:8px;display:inline-block;width:16px;height:16px;background: transparent url({0}) no-repeat 0 0 scroll;'></span>".format(item.icon):"").append(item.text);return $li.data("item.autocomplete",item).append($a.html(sb.toString())).appendTo(ul.addClass('search-suggest'));}
function submitHandler(ev){var ival=$.trim($sInput.val());var sval=currentMenuItem.val||ival;if(filterArray&&$.inArray(ival,filterArray)>-1){if($erOverlay){$erOverlay.load();}
else{buildErOverlay();}
return false;}
var special=$sInput.data("special");if(typeof special!="undefined"&&!ival&&$sInput.attr("placeholder")!="粘贴淘宝/天猫宝贝标题，购物拿返利"){window.location.href=special;return false;}
if(!ival||ival==$sInput.attr("placeholder")){return false;}
if(!("header-tbs8pop".getCookie()>0)&&!searchFlag&&currentMenuItem.type=='taobao'){$s8TipsPopup.load();return false;}
else{searchFlag=false;}
UBT.track("global","pc","wd-{0}".format(ival));$vh.val(currentMenuItem.url?currentMenuItem.url:"");}
function buildSearchResult(result,sval){var sb=new StringBuilder();var data=result.data;var len;var temObj;var temDataItem;if(!result.status||data.length==0){currentMenuItem={};return sb.strings;}
len=data.length;for(var i=0;i<=len-1;++i){temObj={};temDataItem=data[i];temObj.idx=(function(){return i;})();temObj.id=temDataItem.id;temObj.url=temDataItem.url;temObj.text=temDataItem.name;temObj.val=temDataItem.val;temObj.type=temDataItem.stype;temObj.icon=temDataItem.icon;temObj.benefit=temDataItem.benefit;temObj.isadvise=temDataItem.isadvise;temObj.hasspace=temDataItem.hasspace;sb.append(temObj);}
currentMenuItem=sb.strings[0];return sb.strings;}}});$.extend($.flSearch,{defaults:defaults});})(jQuery);;(function($){var $topbar=$('#topbar');window.prouserid='prouserid'.getCookie();window.prousername='prousernameutf'.getCookie(),window.lngmsgcnt='lngmsgcnt'.getCookie();window.topbarGetInfo=$.getJSON('//fun.fanli.com/topheader/ajaxGetInfoForTopbar?jsoncallback=?',function(json){var data=json.data;if(data.kefu){$topbar.data({'kfStatus':data.kefu.kf,'telStatus':data.kefu.tel});}
if(data.crm_mvp){$topbar.data({'hasCrmMvp':data.crm_mvp});}
if(data.timestamp){$topbar.data({'timestamp':data.timestamp});}
if(data.userinfo){$topbar.data({'bindEmail':data.userinfo.mail_validated,'lv':data.userinfo.lv||0});}}).done(topbarWrite);window.utmtOps=$.getJSON("//fun.fanli.com/topheader/ajaxGetMvpStorys?jsoncallback=?",function(res){var data=res.data;if(data.story_ids){$topbar.data({'betatest':data.story_ids});}});function topbarWrite(){var username=decodeURIComponent(decodeURIComponent(prousername));$quickinfo=$('#J_topbar_quick_info'),$chklogin=$('#J_topbar_chklogin'),$menucs=$('#J_topbar_cs_btn'),isShowMsg=$topbar.data("closemsg")!=1,lv=$topbar.data("lv");if(prouserid>0){var newS=new StringBuilder();newS.append('<div class="topbar-nav J-topbar-nav">').append('<div class="clearfix menu-hd menu-hd-name"><a class="l menu-name ellipsis" href="https://passport{1}/center/welcome" title={0}>{0}</a>'.format(username,Fanli.Utility.rootDomain));if(parseInt(lv)&&lv>0){newS.append('<a href="https://passport{2}/center/vip" class="l menu-lv"><img src="//static2.51fanli.net/common/images/level/icon-small-lv{0}.alpha.png" alt="等级{1}" width="16" height="16"></a>'.format(lv,lv,Fanli.Utility.rootDomain));}
newS.append('<i class="arrow"></i></div>').append('<div class="menu-bd menu-user">').append('<em class="arrow"></em>').append('<dl>').append('<dd><a href="https://passport{0}/center/orders">我的订单</a></dd>'.format(Fanli.Utility.rootDomain)).append('<dd><a href="https://passport{0}/center/deposit">我的返利</a></dd>'.format(Fanli.Utility.rootDomain)).append('<dd><a href="https://f{0}/life/mobiletopup/topup1">手机充值</a></dd>'.format(Fanli.Utility.rootDomain)).append('<dd><a href="https://passport{0}/center/safeuser/safecenter" rel="nofollow">账户设置</a></dd>'.format(Fanli.Utility.rootDomain)).append('<dd class="last"><a href="https://passport{0}/logout" rel="nofollow">退出</a></dd>'.format(Fanli.Utility.rootDomain)).append('</dl>').append('</div>').append('</div>').append('<div id="J_topbar_msg" class="topbar-msg clearfix"><a href="https://passport{0}/center/message"><i>消息</i><p class="msg-p"><span class="msg-span"><em>0</em></span></p></a></div>'.format(Fanli.Utility.rootDomain));$chklogin.html(newS.toString());if(GeneralValidation.isIe6()){var $username=$chklogin.find('.menuname');var csswidth=80;if($username.width()>csswidth){$username.width(csswidth);}};if(!lngmsgcnt)
{if(isShowMsg)
{$.getJSON('//passport{0}/client/user/getUserMessage?jsoncallback=?'.format(Fanli.Utility.rootDomain),function(data)
{if(data.status==1)
{lngmsgcnt=data.data;'lngmsgcnt'.setCookie(lngmsgcnt,'0.001',Fanli.Utility.rootDomain,'/');}
else
{lngmsgcnt=0;}
chkmsg(lngmsgcnt);});}
else
{$('#J_topbar_msg').find('.msg-span').remove();}}
else
{chkmsg(lngmsgcnt);}
var crmMvp=$topbar.data('hasCrmMvp')||'';if(crmMvp){var html='<div class="topbar-shopvip"><a href="'+crmMvp+'topbar" class="three">恭喜您获得8%的额外返利资格！</a><i></i></div>';$('#J_topbar_msg').append(html);}}
else{var url=encodeURIComponent(document.URL);var nwsb=new StringBuilder();nwsb.append('<div class="topbar-nav J-topbar-nav">').append('<div class="menu-hd"><a href="{0}/login?go_url={1}" rel="nofollow">马上登录</a><i class="arrow"></i></div>'.format(passportAppUrl,url)).append('<div class="menu-bd menu-login">').append('<em class="arrow"></em>').append('<dl>').append('<dd><a href="{0}/login?go_url={1}" rel="nofollow">返利登录</a></dd>'.format(passportAppUrl,url)).append('<dd><a href="https://passport{0}/oauth/jumpToUnion/type/taobao/ab/1/cooklogin/1" rel="nofollow">淘宝登录</a></dd>'.format(Fanli.Utility.rootDomain)).append('<dd><a href="https://passport{0}/oauth/jumpToUnion/type/qq/ab/1/cooklogin/1" rel="nofollow">QQ登录</a></dd>'.format(Fanli.Utility.rootDomain)).append('<dd><a href="https://passport{0}/oauth/jumpToUnion/type/sina/ab/1/cooklogin/1" rel="nofollow">新浪登录</a></dd>'.format(Fanli.Utility.rootDomain)).append('<dd><a href="https://passport{0}/oauth/jumpToUnion/type/wechat/ab/1/cooklogin/1" rel="nofollow">微信登录</a></dd>'.format(Fanli.Utility.rootDomain)).append('</dl>').append('</div>').append('</div>').append('<div class="topbar-reg"><a target="_blank" href="https://passport{1}/reg?action=yes&go_url={0}" rel="nofollow">免费注册</a></div>'.format(url,Fanli.Utility.rootDomain));$chklogin.html(nwsb.toString());}
$quickinfo.show();}
function chkmsg(lngmsgcnt){var $topUserMsg=$('#J_topbar_msg').find('a'),$userMsg=$('.usermsg'),html='',title='',klass='',len=lngmsgcnt.toString().length;if(lngmsgcnt==0){title='\u60a8\u6ca1\u6709\u65b0\u7684\u7ad9\u5185\u4fe1\uff01';$topUserMsg.attr('title',title).addClass('e0');$userMsg.closest('.usermsg-box').hide();}else{if(len==1){html='<em class="e2">'+lngmsgcnt+'</em>';klass='e2';}else if(len==2){html='<em class="e3">'+lngmsgcnt+'</em>';klass='e3';}else{html='<em class="e3">...</em>';klass='e3';}
title='\u60a8\u8fd8\u6709'+lngmsgcnt+'\u5c01\u65b0\u7684\u7ad9\u5185\u4fe1\u672a\u67e5\u770b\uff01';$topUserMsg.attr('title',title).find('span').prepend(html);setTimeout(function(){$topUserMsg.addClass(klass);$topUserMsg.find('span').animate({'margin-top':'0'},function(){$topUserMsg.find('em').eq(1).remove();});},500);$userMsg.text(lngmsgcnt).closest('.usermsg-box').show();}}})(jQuery);$(function(){var $topbar=$('#topbar');$topbar.on('mouseenter','.J-topbar-nav',function(){var $this=$(this);$this.addClass('topbar-nav-hover');menuImgLazy();}).on('mouseleave','.J-topbar-nav',function(){var $this=$(this);$this.removeClass('topbar-nav-hover');});$(document).on('click','.btn-cs',function(){open53kf();});$('div.message').on('click','.close',function(){$(this).parent().remove();});if($.fn.adloader&&$('#J-fa-topbar').length>0){$('#J-fa-topbar').adloader();}
else{$('#J-fa-topbar').remove();}
function menuImgLazy(){var $menuImgLazy=$('.J-menu-img-lazy');$menuImgLazy.each(function(){var $this=$(this);if($this.data('original')!=$this.attr('src')){$this.attr('src',$this.data('original'))}});}});(function(){"use strict";var $window=$(window);var contentUrl="//passport{0}/mssagicbar/user/customService?jsoncallback=?".format(Fanli.Utility.rootDomain);var jsUrl="//static2.51fanli.net/static/?f=common/js/module/magicsbar/magicsbarbase.js,common/js/module/magicsbar/customservice.js";var v=parseInt(new Date().getTime()/300000);var csInstance;var triggerOffsetOriginal;var postData={};$(document).on("click",".J-mbar-mod-cs-show",function(ev){ev.preventDefault();var $this=$(this);triggerOffsetOriginal=$this.offset();postData.klass=$this.data("klass");if(csInstance){csInstance.trigger=$this;resetModPosition();csInstance.view.show();return;}else{buildDom($this);}}).on('click','.J-mbar-mod-cs-close',function()
{if(csInstance)
{csInstance.view.hide();}});function buildDom($trigger)
{$.getCacheJSONP(contentUrl,postData).done(function(res){if(!res.status){return;}
var $view=$(res.data).appendTo("body");setTimeout(function(){$.ajax({url:"{0}&v={1}".format(jsUrl,v),dataType:"script",cache:true}).done(function(){csInstance=new magicsbarCustomService();csInstance.view=$view;csInstance.trigger=$trigger;resetModPosition();csInstance.setup();csInstance.view.show();});},0);});}
function resetModPosition(){var viewWidth=350;var viewHeight=$('.J-mbar-msg-box-cs').height()||300;var $view=csInstance.view;var $trigger=csInstance.trigger;var triggerOffset=$trigger.offset().top?$trigger.offset():triggerOffsetOriginal;var triggerWidth=$trigger.outerWidth(true);var triggerHeight=$trigger.outerHeight(true);var winScrollTop=$(window).scrollTop();var winScrollLeft=$(window).scrollLeft();var targetLeft;var targetTop;var upDistance=triggerOffset.top-winScrollTop;var downDistance=winScrollTop+$(window).height()-triggerOffset.top-triggerHeight;var leftDistance=triggerOffset.left-winScrollLeft;var rightDistance=winScrollLeft+$(window).width()-triggerOffset.left-triggerWidth;targetTop=upDistance>downDistance?triggerOffset.top-viewHeight:triggerOffset.top+triggerHeight;targetLeft=leftDistance>rightDistance?triggerOffset.left-viewWidth:triggerOffset.left;$view.css({"left":targetLeft+"px",'top':targetTop+"px"});}}());utmtOps.done(function(){(function($){Fanli.ABTest=(function(){var separator="-";var $topbar=$("#topbar");var abTestCookieName="__utmt";var abTestCookieValue=abTestCookieName.getCookie();var abTestCookieValueArr=abTestCookieValue?abTestCookieValue.split(separator):[];var abTestTopbarValue=$topbar.data("betatest");var hasABTestTopbarValue=$topbar.length>0&&!!abTestTopbarValue;var abTestTopbarValueArr=hasABTestTopbarValue?abTestTopbarValue.split(separator):[];function _getMvpCookie(storyId){var returnValue="";var tryReg;if(!abTestCookieValue||!storyId){return returnValue;}
tryReg=abTestCookieValue.match(new RegExp(storyId+"[a-zA-Z]"));if(tryReg){returnValue=tryReg[0];}
return returnValue;}
function _clearMvpCookies(){if(hasABTestTopbarValue&&abTestTopbarValue=="deleteab"){abTestCookieName.setCookie("0",-1,Fanli.Utility.rootDomain,"/");return;}
var temObj={};var finalArr=[];if(abTestCookieValueArr.length==0||abTestTopbarValueArr.length==0){return;}
for(var i=0,len=abTestCookieValueArr.length;i<len;++i){var tem=abTestCookieValueArr[i];var tryReg=tem.match(/^(\d*)([a-zA-Z])$/);if(tryReg){temObj[tryReg[1]]=tem;}}
for(var j=0,jlen=abTestTopbarValueArr.length;j<jlen;++j){var temp=abTestTopbarValueArr[j];var tryItem=temObj[temp];if(tryItem){finalArr.push(tryItem);}}
abTestCookieName.setCookie(finalArr.join(separator),365,Fanli.Utility.rootDomain,"/");}
return{getMvpCookie:_getMvpCookie,clearMvpCookies:_clearMvpCookies}}());}(jQuery,FLNS.register("Fanli.ABTest")));Fanli.ABTest.clearMvpCookies();});(function()
{Fanli.Common.add("ServiceOnline",function()
{var $document=$(document);var triggerSelector=".J_show_customservice";var overlaySelector="#J_fanli_service_online_pop";var gotoTriggerSelector=".J_goto_trigger";var gotoPanelSelector=".J_goto_panel";var questionContSelect=".J_fanli_service_online_content";var endingContSelect=".J_fanli_service_online_ending";var ajaxUrl="//passport.fanli.com/magicsbar/user/customService?jsoncallback=?";var kfUrl="https://fanli.faqrobot.cn/robot/chat2.html?jid=61&sysNum=1476067342641247&device=pc&entry=pc&entry_name=pc%E5%AE%A2%E6%88%B7&custid="+prouserid;function setup()
{bindEvent();}
function bindEvent()
{$document.on("click",triggerSelector,function(ev)
{ev.preventDefault();window.open(kfUrl);}).on("click",gotoTriggerSelector,function()
{var $this=$(this);gotoPanel($this);}).on("click",".J_kf_trigger",function()
{open53kf();}).on("click",".J_goto_ending_trigger",function()
{showEnding();});}
function gotoPanel($trigger)
{$trigger.parents(gotoPanelSelector).fadeOut("fast",function()
{$(overlaySelector).find("{0}[data-number='{1}']".format(gotoPanelSelector,$trigger.attr("data-href"))).fadeIn("fast");});$(".J_kf_trigger").attr("id","ubt-kf-{0}".format($trigger.data("href")));}
function buildOverlay()
{if($(overlaySelector).length)
{showOverlay();}
else
{$.getCacheJSONP(ajaxUrl,function(JSON)
{if(JSON.status==1)
{$("body").append(JSON.data);Fanli.Utility.requirejs(['overlay','expose'],showOverlay);getKfStatus();}});}}
function getKfStatus()
{topbarGetInfo.done(function()
{var $topbar=$("#topbar");if($topbar.data('kfStatus'))
{$(overlaySelector).find(".J-kf-online").show();}
else
{$(overlaySelector).find(".J-kf-offline").show();}});}
function showOverlay()
{$(overlaySelector).data("overlay")?$(overlaySelector).data("overlay").load():bindOverlay();}
function bindOverlay()
{$(overlaySelector).overlay({top:"13%",mask:{color:"#000",opacity:0.5},fixed:false,onClose:function()
{$(overlaySelector).find(gotoPanelSelector).hide();$(overlaySelector).find("{0}[data-number='0']".format(gotoPanelSelector)).show();$(overlaySelector).find(questionContSelect).show();$(overlaySelector).find(endingContSelect).hide();}}).data('overlay').load();};function showEnding()
{$(overlaySelector).find(questionContSelect).fadeOut("fast",function()
{$(overlaySelector).find(endingContSelect).fadeIn("fast");});setTimeout(function()
{$(overlaySelector).data("overlay").close();},3000);}
setup();}).ServiceOnline();})(FLNS.register("Fanli.Common"));;$(function(){if($('#search-form').length>0){$.flSearch();}});;(function($)
{var stepsConfig={login:{contentUrl:"//passport{0}/light/user/lightlogin".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_login_js.js",ns:"Login"},bindCellphone:{contentUrl:"//passport{0}/light/user/lightbindphone".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_bindcellphone_js.js",ns:"BindCellphone"},verPhone:{contentUrl:"//passport{0}/light/user/lightverphone".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_verphone_js.js",ns:"VerPhone"},bindEmail:{contentUrl:"//passport{0}/light/user/lightbindmail".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_bindemail_js.js",ns:"BindEmail"},bindSafeQuestion:{contentUrl:"//passport{0}/light/user/lightBindSafeQuestion".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_bindsafequestion_js.js",ns:"BindSafeQuestion"},checkSafeQuestion:{contentUrl:"//passport{0}/light/user/lightchecksafequestion".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_checksafequestion_js.js",ns:"CheckSafeQuestion"},checkVerifyCode:{contentUrl:"//passport{0}/light/user/lightcheckverifycode".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_checkverifycode_js.js",ns:"checkVerifyCode"},inviteRegister:{contentUrl:"//passport{0}/light/user/lightinviteregister".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_invite_register_js.js",ns:"InviteRegister"},inviteRegisterForLanding:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding2:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding2".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding3:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding3".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding4:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding4".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding6:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding6".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding10:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding10".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding11:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding11".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding12:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding12".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding13:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding13".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding14:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding14".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding15:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding15".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding16:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisterforlanding16".format(Fanli.Utility.rootDomain),js:"",ns:""},inviteRegisterForLanding17:{contentUrl:"//passport{0}/light/user/lightinviteregister?type=lightinviteregisnewlanding".format(Fanli.Utility.rootDomain),js:"",ns:""},bindIdentify:{contentUrl:"//passport{0}/light/user/lightBindIdentify".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_bindidentify_js.js",ns:"BindIdentify"},verIdentify:{contentUrl:"//passport{0}/light/user/lightVerIdentify".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_veridentify_js.js",ns:"VerIdentify"},verPayAccount:{contentUrl:"//passport{0}/light/user/lightVerPayAccount".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_verpayaccount_js.js",ns:"VerPayAccount"},bindIdentifyAndName:{contentUrl:"//passport{0}/light/user/lightBindIdentifyAndName".format(Fanli.Utility.rootDomain),js:"//static2.51fanli.net/static/passport_light_bindidentifyandname_js.js",ns:"BindIdentifyAndName"}};var defaults={step:"login",overlaySelector:"lightpopup",popWidth:370,popTop:'15%',onSubmitSuccess:$.noop,onSubmitError:$.noop,postData:{}};$.extend({light:function(options)
{var settings=$.extend(true,{},defaults,options);var os=settings.overlaySelector;var lightNamespace="Light";var onSubmitSuccess=settings.onSubmitSuccess;var onSubmitError=settings.onSubmitError;var postData=settings.postData;setup();function setup()
{var $overlay=$("#{0}".format(os));$overlay.length>0?$overlay.data("overlay").load():buildOverlay();}
function buildOverlay()
{var $overlay=$("<div id='{0}' style='width:{1}px; zoom:1;background:url(//static2.51fanli.net/common/images/loading/circle-32.gif) no-repeat #fff center center; height:auto;'></div>".format(os,settings.popWidth)).appendTo("body");$overlay.overlay({closeOnClick:false,closeOnEsc:false,top:settings.popTop,mask:{bgiframe:true},onBeforeLoad:function()
{var $overlay=this.getOverlay();var currentStep=settings.step;var currntObj=stepsConfig[currentStep];$.ajax({url:currntObj.contentUrl,type:"POST",dataType:"jsonp",cache:true,data:postData,jsonp:"jsoncallback",scriptCharset:"utf-8",success:function(result)
{if(result.status="1")
{$overlay.html(result.data);if(currntObj.js&&currntObj.js!="")
{setTimeout(function()
{if(window[lightNamespace]&&window[lightNamespace][currntObj.ns])
{onSubmitSuccess.call($overlay);}
else
{$.ajax({url:currntObj.js+'?v='+parseInt(new Date().getTime()/300000),dataType:'script',cache:true,scriptCharset:"utf-8",success:function(){onSubmitSuccess.call($overlay);}});}},0);}
else
{onSubmitSuccess.call($overlay);}}},error:function(xhr,ts,et)
{xhr=null;onSubmitError();}});},onLoad:function()
{var $overlay=this.getOverlay();$overlay.on("click",".close",function()
{$(this).attr("data-autoload")=="1"?window.location.reload():$overlay.data("overlay").close();});},onClose:function()
{var $overlay=this.getOverlay();$overlay.off("click",".close");$overlay.html('').remove();}}).data("overlay").load();}}});$.extend($.light,{defaults:defaults});})(jQuery);;(function(){var $waterfall=$('#waterfall');var delayTimer=4000;function waterfall(){var $links=$waterfall.find('a');var $imgs=$waterfall.find('img');var pattern=/^#[0-9a-fA-F]{6}$/;if($links.length>1){var $large=$links.eq(0);var $small=$links.eq(1);var id=$large.data('id');var bgColor=$large.find('img').attr('alt');var cookie='ad_waterfall_'+id;$large.find('img').load(function(){$links.hide();if(pattern.test(bgColor)){$large.find('img').removeAttr('alt');$waterfall.css('background',bgColor);}
$waterfall.show();if(!cookie.getCookie()){$large.slideDown(500,function(){setTimeout(function(){$large.animate({'height':'80px'},500,function(){$small.show();$waterfall.height('80');$large.hide();});},delayTimer);});cookie.setCookie('1','1',Fanli.Utility.rootDomain,'/');}
else{$small.slideDown();}});}
else if($links.length>0){var bgColor=$waterfall.find('img').attr('alt');$waterfall.find('img').load(function(){if(pattern.test(bgColor)){$waterfall.find('img').removeAttr('alt');$waterfall.css('background',bgColor);}
$waterfall.slideDown();});}}
$waterfall.adloader({onReady:function(){waterfall();}});})();;;(function($)
{var currentSearch=location.search;var showsignupArr=/showsignup=([^&]*)/gi.exec(currentSearch);var delayTime=300;var animateTime=500;var animateTimeTwo=1000;var easing="easeOutBack";var markcodeCookie="markcode".getCookie();var passCookieCondition=!!(markcodeCookie&&!(/^0\./g.test(markcodeCookie)))&&!("prouserid".getCookie());var showSignupPop=function(url)
{Fanli.Utility.requirejs(['overlay','expose','easing','light','switchable'],showPop);function showPop()
{$.light({popWidth:540,step:url,postData:{'go_url':window.location.href},onSubmitSuccess:function()
{var $spotlight=$('#J-lrfl-spotlight');var $panelsOneTip=$("#J-lrfl-panles-shopping").find(".J-lrfl-panles-title");var $panelsTwoTip=$("#J-lrfl-panles-economize").find(".J-lrfl-panles-title");var $panelsThreeTip=$("#J-lrfl-panles-fanli").find(".J-lrfl-panles-title");$spotlight.switchable({putTriggers:'appendTo',panels:'.J-lrfl-panles',effect:'scrollLeft',prev:'#J-lrfl-panles-prev',next:'#J-lrfl-panles-next',triggersWrapCls:null,autoplay:true});}});}}
if(showsignupArr&&passCookieCondition){var url="";if(showsignupArr[1]=="1"){url="inviteRegisterForLanding";}else if(showsignupArr[1]=="4"){url="inviteRegisterForLanding3";}
url&&showSignupPop(url);}})(jQuery);(function($)
{var currentSearch=location.search;var showsignupArr=/showsignup=([^&]*)/gi.exec(currentSearch);var markcodeCookie="markcode".getCookie();var passCookieCondition=!!(markcodeCookie&&!(/^0\./g.test(markcodeCookie)))&&!("prouserid".getCookie());var showSignupPopBottom=function()
{Fanli.Utility.requirejs(['overlay','expose','easing'],showPop);function showPop()
{$.ajax({url:'//passport{0}/light/user/lightinviteregister'.format(Fanli.Utility.rootDomain),data:{'type':'lightinviteregisterforlandingbtm','go_url':window.location.href},type:"POST",dataType:"jsonp",jsonp:"jsoncallback",cache:true,scriptCharset:"utf-8",success:function(result)
{if(result.status="1")
{var $btmbar=$(result.data);$btmbar.appendTo('body');$btmbar.css('width',$(window).width());$btmbar.sidebar({min:0,fadeSpeed:200,position:'bottom',anchorOffset:0,relative:false,relativeWidth:990});}}});};}
if(showsignupArr&&showsignupArr[1]=="2"&&passCookieCondition){showSignupPopBottom();}})(jQuery);(function($)
{var currentSearch=location.search;var showsignupArr=/showsignup=([^&]*)/gi.exec(currentSearch);var markcodeCookie="markcode".getCookie();var passCookieCondition=!!(markcodeCookie&&!(/^0\./g.test(markcodeCookie)))&&!("prouserid".getCookie());var showSignupPop=function()
{Fanli.Utility.requirejs(['overlay','expose','easing','light','switchable'],showPop);function showPop()
{$.light({popWidth:712,step:url,postData:{'go_url':window.location.href},onSubmitSuccess:function()
{var $lightpopup=$('#lightpopup');$lightpopup.css('background','none');$('#J-three-login-close').click(function()
{$lightpopup.data('overlay').close();});}});}}
if(showsignupArr&&passCookieCondition){var url="";if(showsignupArr[1]=="3"){url="inviteRegisterForLanding2";}else if(showsignupArr[1]=="10"){url="inviteRegisterForLanding10";}else if(showsignupArr[1]=="11"){url="inviteRegisterForLanding11";}else if(showsignupArr[1]=="12"){url="inviteRegisterForLanding12";}
url&&showSignupPop(url);}})(jQuery);(function($)
{var currentSearch=location.search;var showsignupArr=/showsignup=([^&]*)/gi.exec(currentSearch);var markcodeCookie="markcode".getCookie();var passCookieCondition=!!(markcodeCookie&&!(/^0\./g.test(markcodeCookie)))&&!("prouserid".getCookie());var showSignupPop2=function()
{Fanli.Utility.requirejs(['overlay','expose','easing','light','switchable'],showPop);function showPop()
{$.light({popWidth:712,step:url,postData:{'go_url':window.location.href},onSubmitSuccess:function()
{var $lightpopup=$('#lightpopup');var $exposeMask=$('#exposeMask');$lightpopup.css('background','none');$('#J-three-login-close').click(function()
{var $this=$(this);if($this.data('state')=="1")
{$lightpopup.hide();$exposeMask.hide();$this.data('state','2');setTimeout(function()
{$lightpopup.show();$exposeMask.show();},3000);}
else
{$lightpopup.data('overlay').close();}});}});}}
if(showsignupArr&&showsignupArr[1]=="5"&&passCookieCondition)
{var url='inviteRegisterForLanding4';showSignupPop2(url);}})(jQuery);(function($)
{var currentSearch=location.search;var showsignupArr=/showsignup=([^&]*)/gi.exec(currentSearch);var markcodeCookie="markcode".getCookie();var passCookieCondition=!!(markcodeCookie&&!(/^0\./g.test(markcodeCookie)))&&!("prouserid".getCookie());var showSignupPop=function()
{Fanli.Utility.requirejs(['overlay','expose','easing','light'],showPop);function showPop()
{$.light({popWidth:909,popTop:'center',step:url,postData:{'go_url':window.location.href},onSubmitSuccess:function()
{$('#lightpopup').css({'background':'none','margin-top':'-455px'});}});}}
if(showsignupArr&&showsignupArr[1]=="6"&&passCookieCondition)
{var url='inviteRegisterForLanding6';showSignupPop(url);}})(jQuery);(function($){var currentSearch=location.search;var showsignupArr=/showsignup=([^&]*)/gi.exec(currentSearch);var markcodeCookie="markcode".getCookie();var passCookieCondition=!!(markcodeCookie&&!(/^0\./g.test(markcodeCookie)))&&!("prouserid".getCookie());var showSignupPop=function(){Fanli.Utility.requirejs(['overlay','expose','easing','light'],showPop);function showPop(){$.light({popWidth:712,step:url,postData:{'go_url':window.location.href},onSubmitSuccess:function(){$('#lightpopup').css('background','none');}});}}
if(showsignupArr&&passCookieCondition){var url="";if(showsignupArr[1]=="13"){url="inviteRegisterForLanding13";}else if(showsignupArr[1]=="14"){url="inviteRegisterForLanding14";}else if(showsignupArr[1]=="15"){url="inviteRegisterForLanding15";}
url&&showSignupPop(url);}})(jQuery);(function($){var currentSearch=location.search;var showsignupArr=/showsignup=([^&]*)/gi.exec(currentSearch);var markcodeCookie="markcode".getCookie();var passCookieCondition=!!(markcodeCookie&&!(/^0\./g.test(markcodeCookie)))&&!("prouserid".getCookie());var showSignupPop=function(url){Fanli.Utility.requirejs(['overlay','expose','easing','light','switchable'],showPop);function showPop(){$.light({popWidth:712,step:url,postData:{'go_url':window.location.href},onSubmitSuccess:function(){var $spotlight=$('.J-panle-box');$('#lightpopup').css('background','none');$spotlight.switchable({triggers:false,putTriggers:'appendTo',panels:'.J-panle',effect:'scrollLeft',prev:'#J-arrow-prev',next:'#J-arrow-next',triggersWrapCls:null,autoplay:true});}});}}
if(showsignupArr&&showsignupArr[1]=="16"&&passCookieCondition){var url='inviteRegisterForLanding16';showSignupPop(url);}})(jQuery);(function($){var currentSearch=location.search;var showsignupArr=/showsignup=([^&]*)/gi.exec(currentSearch);var markcodeCookie="markcode".getCookie();var passCookieCondition=!!(markcodeCookie&&!(/^0\./g.test(markcodeCookie)))&&!("prouserid".getCookie());var showSignupPop=function(url,showsignup){Fanli.Utility.requirejs(['overlay','expose','light'],showPop);function showPop(){$.light({popWidth:730,step:url,postData:{'go_url':window.location.href,'showsignup':showsignup}});}}
if(showsignupArr&&showsignupArr[1]>17&&passCookieCondition){var url='inviteRegisterForLanding17';showSignupPop(url,showsignupArr[1]);}})(jQuery);;(function($)
{var defaults={text:"&times;",id:"J_cleanup",offset:{left:15,top:5},afterBuild:$.noop,afterCleanup:$.noop};$.fn.inputCleanup=function(options)
{var settings=$.extend(true,{},defaults,options);var id=settings.id;return this.each(function()
{var $this=$(this);$this.on("focusin.IC keyup.IC",function()
{var ph=$this.attr("placeholder");var val=$.trim($this.val());if(val&&val!=ph)
{if($("#{0}".format(id)).length==0)
{$this.before("<a href='javascript:void(0);' class='J_c_spoof_f' style='position:absolute;color:#d9d9d9;font-size:16px;font-weight:bold;font-family:tahoma;' id='{0}'>{1}</a>".format(id,settings.text));$("#{0}".format(id)).hover(function(){$(this).css("color","#949494")},function(){$(this).css("color","#d9d9d9")});adjustPosition($this,$("#{0}".format(id)));settings.afterBuild($("#{0}".format(id)));bindCleanup($this);}
else
{$("#{0}".format(id)).show();}}
else
{$("#{0}".format(id)).hide();}});});function adjustPosition($input,$cleanup)
{var $parent=$input.parent();$parent.css("position","relative");$cleanup.css({"left":$input.offset().left-$parent.offset().left+$input.outerWidth()-settings.offset.left+"px","top":settings.offset.top+"px"});}
function bindCleanup($input)
{$("#{0}".format(id)).on("click",function()
{$(this).hide();$input.val('').focus();;settings.afterCleanup.call($input);});}}
$.fn.inputCleanup.defaults=defaults;})(jQuery);;(function($)
{var defaults={text:"处理中...",id:"J_tbtb",getOriginalClass:false,size:"btn-m"};$.fn.toggleButton=function(options)
{var settings=$.extend(true,{},defaults,options);var id=settings.id;return this.each(function()
{var $this=$(this);if($("#{0}".format(id)).length==0)
{$this.after("<span id='{0}' style='display:none;' class='{1}'>{2}</span>".format(id,settings.getOriginalClass?$this.attr("class"):"btn {0} btn-waiting".format(settings.size),settings.text));}
exchange($this,$("#{0}".format(id)));});function exchange($btn,$spoofBtn)
{$btn.is(":visible")?$btn.hide():$btn.css("display","inline-block");$spoofBtn.is(":visible")?$spoofBtn.hide():$spoofBtn.css("display","inline-block");}}
$.fn.toggleButton.defaults=defaults;})(jQuery);;(function($)
{var defaults={tipsText:"请输入{0}",blankText:"格式正确",tipAttr:"tip",errorBorderClass:"vfb",separator:"-",relatedEleSelector:"",relatedText:"",triggerFocusEvent:true};var errorTypeConfig={tip:"vt",failure:"vf",failuret:"vf",success:"vo",successv:"von"};var specialType={cellphone:{reg:/^(?:0086|86)?1[3456789]\d{9}$/,errortxt:"手机格式不正确"},url:{reg:/^http(s)?:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/ig,errortxt:"网址格式不正确"},email:{reg:/^([a-zA-Z0-9])+([a-zA-Z0-9_\.\-])*\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})$/ig,errortxt:"邮箱格式不正确"},alipay:{reg:/^(([a-zA-Z0-9])+([a-zA-Z0-9_\.\-])*\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4}))|(0{0,1}1[3456789]{1}[0-9]{9})$/ig,errortxt:"支付宝账户格式不正确"},icard:{reg:/^(\d{18}|\d{15}|\d{17}x)$/ig,errortxt:"身份证号格式不正确"},uname:{reg:/^[\u4e00-\u9fa5a-zA-Z\s]+$/ig,errortxt:"仅包含汉字英文字母及空格"},bankaccount:{reg:/^([a-zA-Z0-9]|-)+$/ig,errortxt:"卡号格式不正确，请重新输入"},price:{reg:/^\d+$/ig,errortxt:"请输入正确的整数值"},integer:{reg:/^[1-9][0-9]*$/ig,errortxt:"请输入正确的整数值"},qq:{reg:/^[1-9][0-9]{3,}$/ig,errortxt:"请输入正确的QQ号码"},ihkcard:{reg:/^[a-z0-9]{1}\d{6,7}[a-z0-9]{1}$/ig,errortxt:"身份证号格式不正确"},itwcard:{reg:/^[a-z]{1}\d{8,}$/ig,errortxt:"身份证号格式不正确"},verifycode:{reg:/^\d{6}$/,errortxt:"验证码格式不正确"}};var bothType={emailandnull:{reg:/^([a-zA-Z0-9])+([a-zA-Z0-9_\.\-])*\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})$/ig,keychar:"@",errortxt:"邮箱格式不正确"}};$.fn.inputNullValidation=function(options)
{var settings=$.extend(true,{},defaults,options);var tipAttr=settings.tipAttr;var separator=settings.separator;var tipsText=settings.tipsText;var blankText=settings.blankText;var moreValidation="price";var sucText="successv";var failText="failure";var tipText="tip";var trim=$.trim;return this.each(function()
{var $input=$(this);var originalTipsText;var actualTipsText;var tipsArr;var sType;setupEventHandler();function setupEventHandler()
{prepareLazyVariable();$input.data("bh",blurHandler);$input.on("focus.NV",function(){focusHandler();}).on("blur.NV",function(){blurHandler();});}
function prepareLazyVariable()
{originalTipsText=tipsText.format($input.attr("data-{0}".format(tipAttr)));tipsArr=originalTipsText.split(separator);actualTipsText=tipsArr[0];sType=tipsArr[1]?tipsArr[1]:"";}
function focusHandler()
{prepareLazyVariable();if(settings.triggerFocusEvent)
{showMessage(tipText,actualTipsText);}}
function blurHandler()
{var tryspecial=specialType[sType];var tryBothSpecial=bothType[sType];if(tryspecial)
{return specialValidation(tryspecial);}
if(tryBothSpecial)
{return bothSpecialValidation(tryBothSpecial);}
return nullValidation();}
function nullValidation()
{var ph=$input.attr("placeholder");var inputval=trim($input.val());if(!inputval||inputval==ph)
{showMessage(failText,actualTipsText);return false;}
else
{if(settings.relatedEleSelector&&$(settings.relatedEleSelector).val()==settings.relatedText)
{showMessage(failText,actualTipsText);return false;}
if($input.data("keepstaticsuccess")!="1")
{removeMessage();}
return true;}
return true;}
function specialValidation(tryspecial)
{var ph=$input.attr("placeholder");var inputval=trim($input.val());var reg=tryspecial.reg;if(!inputval||inputval==ph)
{showMessage(failText,actualTipsText);return false;}
if(reg.test(inputval))
{reg.lastIndex=0;if(sType==moreValidation)
{return betweenValidation(inputval);}
else
{if($input.data("keepstaticsuccess")!="1")
{removeMessage();}
return true;}}
else
{showMessage(failText,tryspecial.errortxt);return false;}}
function bothSpecialValidation(tryBothSpecial)
{var keychar=tryBothSpecial.keychar;var inputval=trim($input.val());if(inputval.indexOf(keychar)>-1)
{return specialValidation(tryBothSpecial);}
else
{return nullValidation();}}
function betweenValidation(inputval)
{var bTipsAttr="cerrortext";if(Number(inputval)>=Number($input.data("min"))&&Number(inputval)<=Number($input.data("max")))
{if($input.data("keepstaticsuccess")!="1")
{removeMessage();}
return true;}
else
{showMessage("failuret",$input.data(bTipsAttr));return false;}}
function showMessage(errorType,showText)
{var ebc=settings.errorBorderClass;var $messagespan=$input.nextAll("span.vc");var $span=$messagespan.length>0?$messagespan.last():$("<span style='zoom:1;'></span>").appendTo($input.parent());$span.addClass("vc {0}".format(errorTypeConfig[errorType])).html(showText);(errorType==failText||errorType=="failuret")?$input.addClass(ebc):$input.removeClass(ebc);}
function removeMessage()
{$input.removeClass("vfb").nextAll("span.vc").remove();}});};$.fn.inputNullValidation.defaults=defaults;})(jQuery);;(function($)
{var defaults={postUrl:"",mustFillSelector:".nullv:visible",postDataNameSelector:".tov:visible",onSubmitSuccess:$.noop,onSubmitError:$.noop,isJsonpFormat:false,beforeClick:$.noop,returninfoId:"J_r_r_in",simpleOutput:false,memoryParameters:{}};$.fn.submitWithValidation=function(options)
{var settings=$.extend(true,{},defaults,options);var onSubmitSuccess=settings.onSubmitSuccess;var onSubmitError=settings.onSubmitError;var beforeClick=settings.beforeClick;var returninfoId=settings.returninfoId;var returninfoSelector="#"+returninfoId;var $returninfo=$("<div id='{0}' class='J_swv_msg limited_text'></div>".format(returninfoId));var spoofId="J_spoof_sb_{0}".format(Math.random().toString(16).substr(5,10));var simpleOutput=settings.simpleOutput;return this.each(function()
{setupSumbitCondition($(this));});function setupSumbitCondition($submitbtn)
{$submitbtn.on("click.ST",function(ev)
{ev.preventDefault();beforeClick();clickHandler($submitbtn);});}
function clickHandler($submitbtn)
{var $allValidationEle=$(settings.mustFillSelector);var $postEle=$(settings.postDataNameSelector);var postData={};var isPass=1;$(returninfoSelector).hide();$allValidationEle.each(function()
{var $this=$(this);var blurHandler=$this.data("bh");var t=blurHandler();isPass=isPass&&t;});if(!isPass){return;}
$submitbtn.toggleButton({id:spoofId});$postEle.each(function()
{var $this=$(this);var name=$this.attr("name");var val=$.trim($this.val());postData[name]=val;});$.extend(postData,options.memoryParameters);$.ajax({url:settings.postUrl,type:"POST",data:postData,dataType:settings.isJsonpFormat?"JSONP":"JSON",success:function(result)
{$submitbtn.toggleButton({id:spoofId});if(result.status=="1")
{onSubmitSuccess.call(result,$submitbtn);}
else
{onSubmitError.call(result,$submitbtn);if(simpleOutput)
{alert(result.info);}
else
{if($(returninfoSelector).length>0)
{$(returninfoSelector).html(result.info).show();}
else
{$returninfo.html(result.info).insertBefore($submitbtn).show();$("<div class='clear'></div>").insertBefore($submitbtn);}}
if(result.data==20008)
{$.light({popWidth:384,step:"login",onSubmitSuccess:function()
{$("#J_tab_div").lightTabGroup({onBeforeSwitch:function(){$(".msg_row").hide();},moreTabShow:function(ts)
{$(document).on("click","#J_to_register, #J_to_register2",function(ev)
{ev.preventDefault();ts(1);}).on("click","#J_to_login_lazy",function(ev)
{ev.preventDefault();var $remail=$("#J_r_email");$("#J_ll_uc_input").focus().val($remail.val()).focusout();$remail.val("");ts(0);$(".lr_status").remove();});}});Light.Login.init({onSubmitSuccess:function(){window.location.reload();}});Light.Register.init();}});}}},error:function(XMLHttpRequest,textStatus,errorThrown)
{}});}};$.fn.submitWithValidation.defaults=defaults;})(jQuery);;(function($)
{var defaults={step:[],offset:{left:0,top:42},separator:" ",fixedWidth:""};$.fn.magnifier=function(options)
{var mid="J_m_{0}".format(Math.random().toString(16).substr(5,10));var trim=$.trim;var $mf;var $input;return this.each(function()
{$input=$(this);buildMagnifier();bindEvents();});function buildMagnifier()
{$input.before("<span class='mf' style='display:none;position:absolute;{1}' id='{0}'></span>".format(mid));$mf=$("#{0}".format(mid));adjustPosition();}
function bindEvents()
{$input.on("keyup.MF",keyupHandler).on("focusout.MF",foucusoutHandler).on("focusin.MF",foucusinHandler);}
function keyupHandler()
{var val=trim($input.val());val=val.replace(/\s*/ig,'');val?$mf.html(buildMValue(val)).css("display","inline-block"):$mf.hide();}
function foucusoutHandler()
{$mf.hide();}
function foucusinHandler()
{var val=trim($input.val());var ph=$input.attr("placeholder");val&&val!=ph?$mf.html(buildMValue(val)).css("display","inline-block"):$mf.hide();}
function adjustPosition()
{var settings=$.extend({},defaults,options);var $parent=$input.parent();$parent.css("position","relative");$mf.css({"left":$input.offset().left-$parent.offset().left-settings.offset.left+"px","top":$input.offset().top-$parent.offset().top-settings.offset.top+"px"});if(settings.fixedWidth)
{$mf.css({"width":settings.fixedWidth});}}
function buildMValue(val)
{var settings=$.extend({},defaults,options);var step=settings.step;if(!step.length){return val;}
var sb=new StringBuilder();var currentStep=0;var len=val.length;for(var i=0;i<=len-1;++i)
{if((i+1)%step[currentStep]==0)
{sb.append(val.charAt(i));if(i!=len-1)
{sb.append(settings.separator);}
if(step.length>1)
{currentStep++;}}
else
{sb.append(val.charAt(i));}}
return sb.toString();}}
$.fn.magnifier.defaults=defaults;})(jQuery);;(function($)
{FLNS.register("Budou.List");Budou.List.add('initHover',function(){$(document).on('mouseenter','.J_budoumm_mod',function(){$(this).addClass('budoumm-mod-hover');}).on('mouseleave','.J_budoumm_mod',function(){$(this).removeClass('budoumm-mod-hover');});}).initHover();})(jQuery);;(function($)
{var $document=$(document);var $window=$(window);var prouserid='prouserid'.getCookie();var booleanLogged=Fanli.Utility.isLogin;FLNS.register("Fanli.Homepage");Fanli.Homepage.add("lazyload",function($obj)
{var $lazy;$obj?$lazy=$obj.find('img.lazy'):$lazy=$('img.lazy');$lazy.lazyload({threshold:300,failurelimit:15,effect:'fadeIn'});}).lazyload();Fanli.Homepage.add("init",function()
{showIE6Msg();bindSticky();$(document).on('click','.J_tuan_item_link',function(ev){var $this=$(this);$this.attr('href',$this.data('href'));});$("#J_nav_home").addClass("current");function showIE6Msg()
{var $msg=$("#J_homepage_ie6msg");var cookieName="FL_HOME_IE6_MSG";if($msg.length<1){return;}
if(cookieName.getCookie()!=1){$msg.show();}
$msg.find(".close").on("click",function()
{cookieName.setCookie("1","1",Fanli.Utility.rootDomain,"/");});}
function bindSticky()
{setTimeout(function()
{$("#J_home_tuan_subca").sticky({min:$("#J_home_tabs_triggers").offset().top+41});},1000);}}).init();Fanli.Homepage.add("bindEmailTips",function()
{var $topbar=$("#topbar");var nesb=new StringBuilder();var cookieName="FL_HOME_TOP_EMAIL_TIPS"
setup();function setup()
{topbarGetInfo.done(function()
{if($topbar.data("bindEmail")=="0"&&!(cookieName.getCookie())&&booleanLogged)
{buildTips();bindLiveEvent();}});}
function buildTips()
{nesb.append('<div class="home-email-wrap yahei">').append('<div id="J_home_email_tips" class="home-email-tips">').append('<div class="container">').append('<i class="i-notice"></i><span class="txt">您知道吗？为确保<strong>返利资产安全</strong>，80% 的返利网用户已经<strong>验证邮箱和手机</strong></span>').append('<a class="btn btn-l btn-red" href="//passport.fanli.com/center/safemail/bindemail1Noemail?ref=11" target="_blank">立即绑定邮箱</a>').append('<a id="J_home_email_close_btn" class="btn-close" href="javascript:void(0);">&times;</a>').append('</div>').append('</div>').append('</div>');$topbar.before(nesb.toString());setTimeout(function()
{$("#J_home_email_tips").sticky({zIndex:1001});$window.trigger("scroll");},200);}
function bindLiveEvent()
{$document.on("click","#J_home_email_close_btn",function(ev)
{$("#J_home_email_tips").parent().remove();cookieName.setCookie("1","1",Fanli.Utility.rootDomain,"/");});}}).bindEmailTips();Fanli.Homepage.add("registerPopup",function()
{var urlsrh=location.search;var urlskey=/skey/.test(urlsrh)?urlsrh.match(/skey\=\w+/)[0].replace(/skey\=/,""):"";var showSignupPop=function()
{var loadJs=function()
{var arr=[];$.tools=$.tools||{};!$.tools.overlay&&arr.push("//static2.51fanli.net/common/libs/tools/overlay.min.js");!$.tools.expose&&arr.push("//static2.51fanli.net/common/libs/tools/expose.min.js");typeof($.light)=="undefined"&&arr.push("//static2.51fanli.net/passport/js/light/createpopup.js");return arr;}();if(loadJs.length>0)
{loadJs.push(function(){showPop();});head.js.apply(this,loadJs);}else
{showPop();}
function showPop()
{$.light({popWidth:724,step:"inviteRegister",postData:{skey:urlskey},onSubmitSuccess:function()
{Light.InviteRegister.init({onSubmitSuccess:function()
{window.location.href='//passport{0}/redirect/regsuccess?go_url='.format(Fanli.Utility.rootDomain)+encodeURIComponent(window.location.href);}});}});};}
if(/showsignup\=1/.test(location.href)&&('recommendt'.getCookie()!=''||urlskey!='')&&!("prouserid".getCookie()))
{showSignupPop();}}).registerPopup();Fanli.Homepage.add("myShops",function()
{var ajaxUrl='//fun{0}/homepage/getMyShops/?jsoncallback=?'.format(Fanli.Utility.rootDomain);var $loading=$("#J_myshop_loading");setup();function setup()
{getMyShopsNew();}
function getMyShopsNew()
{$.getCacheJSONP(ajaxUrl,{limit:15},function(JSON)
{if(JSON.status==1&&JSON.data!="")
{$("#J_myshop_list").html(JSON.data);}},false).done(function()
{Fanli.Homepage.shopTips($("#J_myshop_list"));$loading.fadeOut();});}}).myShops();Fanli.Homepage.add("shopTips",function($obj)
{var mallTipsSelector="#J_mall_tips";setup();function setup()
{showTips();}
function showTips()
{var hoverClassName="item-logo-current";var quickFlSelector=".J_quickfan_ico";var logoSelector="a.J_mall_logo";var $tips;typeof($obj)=="undefined"?$tips=$(logoSelector):$tips=$obj.find(logoSelector);$tips.tooltip({position:'bottom center',offset:[-28,0],tip:mallTipsSelector,predelay:50,delay:50,onBeforeShow:function()
{var trigger=this.getTrigger();var $icon=trigger.find(quickFlSelector);trigger.addClass(hoverClassName);buildTips(trigger);if($icon.length>0){$icon.stop().animate({'width':'38px'},200);}},onHide:function()
{var trigger=this.getTrigger();var $icon=trigger.find(quickFlSelector);trigger.removeClass(hoverClassName);if($icon.length>0){$icon.stop().animate({'width':0},200);}}});}
function buildTips(obj)
{var $tips=$(mallTipsSelector);var $goshopBtn=$tips.find("a.J_goshop_btn");var $gofanlBtn=$tips.find("a.J_gofanl_btn");var shopid=obj.attr("data-shopid");var gUrl=obj.attr("data-gurl");var pUrl=obj.attr("data-purl");$goshopBtn.attr("href",gUrl);$gofanlBtn.attr("href",pUrl);}}).shopTips();Fanli.Homepage.add("homeTabs",function()
{var $homeTabsContent=$("#J_home_tabs_content");var $homeTabsTrigger=$("#J_home_tabs_triggers");var $homeTabsPanel=$(".J_home_tabs_panel");var panelSelector1="#J_home_tabs_p1";var panelSelector2="#J_home_tabs_p2";var events="scroll.IFLMC resize.IFLMC";var cXHR;var ajaxUrlTuan='//fun{0}/homepage/ajaxUserIndexTab'.format(Fanli.Utility.rootDomain);var idxTabId='idxTabId'.getCookie();setup();function setup()
{bindSwitchList();getUserStatus();}
function bindSwitchList()
{$homeTabsTrigger.on("click","li",function(ev)
{var $this=$(this);var i=$this.index();"idxTabId".setCookie(i,90,Fanli.Utility.rootDomain,"/");if(booleanLogged){$.getJSON('{0}?jsoncallback=?'.format(ajaxUrlTuan),{'tab':i,'operation':1});}
ev.preventDefault();$this.addClass("current").siblings().removeClass("current");unbindScrollHandler();$homeTabsPanel.hide();$homeTabsPanel.eq(i).show();infiniteScroll('#'+$homeTabsPanel.eq(i).attr('id'));$(window).triggerHandler("scroll");setTimeout(function(){UBT.PlugIns.Exposure.init();},200);});$homeTabsPanel.each(function(i){if($(this).is(':visible')){infiniteScroll('#'+$homeTabsPanel.eq(i).attr('id'));}});}
function getUserStatus()
{if(idxTabId==="")
{if(booleanLogged)
{$.getJSON('{0}?jsoncallback=?'.format(ajaxUrlTuan),function(JSON)
{"idxTabId".setCookie(JSON.data?JSON.data:"0",90,Fanli.Utility.rootDomain,"/");});}
else
{"idxTabId".setCookie(0,90,Fanli.Utility.rootDomain,"/");}}}
function infiniteScroll(wrap)
{$window.on(events,function()
{var $wrap=$(wrap);var $clast=$wrap.find(".J_panel_mod:last");var nextSelector="div.J_page_ajax_url";var $nextBox=$wrap.find(nextSelector);var contentUrl=$wrap.find("{0} a".format(nextSelector)).attr("href");var currentPage;var $loading=$wrap.find(".J_page_ajax_loading")||"";if($wrap.length<1||$clast.length<1){return;}
if($window.scrollTop()>=$clast.offset().top+$clast.outerHeight()-$(window).height())
{if(cXHR&&cXHR.status!=200){return;};$loading.show();cXHR=$.getCacheJSONP(contentUrl,{'page':$wrap.data('currentpage')+1},function(data){$loading.hide();if(data.status==1)
{var page=$wrap.data("currentpage");var $cdh=$(data.data);$wrap.data("currentpage",page+1);$nextBox.before($cdh);Fanli.Homepage.lazyload($cdh);setTimeout(function(){UBT.PlugIns.Exposure.init();},200);}
if(data.status!=1||data.data=="")
{unbindScrollHandler();}},false);}});}
function unbindScrollHandler()
{$window.unbind(events);}}).homeTabs();Fanli.Homepage.add("rightSide",function()
{var $switchA=$('#J-switch-a');$switchA.switchable({triggers:$('#J-switch-a-tabs > li'),panels:'div.J-switch-a-panel',triggerType:'click',onSwitch:function(e,i)
{$('div.J-switch-a-panel').eq(i).find('img.lazy').trigger('appear');}});$.getCacheJSONP('//fun{0}/homepage/ajaxSuperHot?jsoncallback=?'.format(Fanli.Utility.rootDomain),function(JSON)
{if(JSON.status==1)
{$('#J_right_col').append(JSON.data);var $switchB=$('#J-switch-b');var $panels=$('div.J-switch-b-panel');Fanli.Homepage.lazyload($switchB);if($panels.length>1){$switchB.switchable({triggers:$('#J-switch-b-tabs > li'),panels:'div.J-switch-b-panel',triggerType:'click',onSwitch:function(e,i)
{$panels.eq(i).find('img.lazy').trigger('appear');}});}
setTimeout(function(){UBT.PlugIns.Exposure.init();},200);}},false);topbarGetInfo.done(function(){var now=$('#topbar').data('timestamp');$('.J-limit-msg').each(function(){var $this=$(this);if($this.data('timestamp')<=now){$this.remove();}});});}).rightSide();Fanli.Homepage.add("story8789",function()
{var $faWrap=$(".J_sidebar_fa");if($faWrap.length<1){return;}
$faWrap.each(function()
{$(this).sidebar({min:0,position:'top'});});$faWrap.find(".J_close_btn").on("click",function()
{$(this).parent().remove();});}).story8789();Fanli.Homepage.add("showSuperPromoPop",function()
{if(prouserid==''){return;}
topbarGetInfo.done(function(json){var packetStatus=json.data&&json.data.userinfo&&json.data.userinfo.super_redenvelope;if(!packetStatus){return;}
var coName='superPromoShown';var htmlPop=new StringBuilder();var htmlSidebar=new StringBuilder();htmlPop.append('<div class="yahei superpromo-pop" id="J_superpromo_pop" style="display:none">').append('<a href="javascript:void(0)" class="close J_superpromo_cancle">关闭</a>').append('<a href="http://huodong.fanli.com/superredenvelope" class="link J_superpromo_getPacket" target="_blank">立即领取</a>').append('</div>')
htmlSidebar.append('<div class="yahei superpromo-sidebar" id="J_superpromo_sidebar" style="display:none">').append('<a href="http://huodong.fanli.com/superredenvelope" class="link link-getpacket J_superpromo_getPacket" target="_blank" style="display:none">领取红包</a>').append('<a href="//passport.fanli.com/center/redenvelope" class="link link-seepacket J_superpromo_seepacket" target="_blank" style="display:none">查看红包</a>').append('</div>');var $pop=$(htmlPop.toString());var $sidebar=$(htmlSidebar.toString());$('body').append($pop);$('body').append($sidebar);var $cancle=$pop.find('.J_superpromo_cancle');var $getPacket=$pop.find('.J_superpromo_getPacket').add($sidebar.find('.J_superpromo_getPacket'));var $seePacket=$sidebar.find('.J_superpromo_seepacket');if(coName.getCookie()){buildLittlePacket();}
else{Fanli.Utility.requirejs(['overlay','expose'],buildPop);}
$getPacket.click(function(){setTimeout(function(){$getPacket.hide();$seePacket.show();$sidebar.show();if($pop.data('overlay')){$pop.data('overlay').close();}},500);})
$cancle.click(function(){$getPacket.show()
$sidebar.show();})
function buildLittlePacket(){if(packetStatus==1){$getPacket.show();}
else{$seePacket.show();}
$sidebar.sidebar({min:0,bottom:6,relative:false});$sidebar.show();}
function buildPop(){$pop.overlay({top:"center",closeOnClick:false,closeOnEsc:false,onLoad:function(){UBT.track("cd","huodong","packet1212","popup");}}).data('overlay').load();coName.setCookie(1,365,Fanli.Utility.rootDomain,'/')}})}).showSuperPromoPop();Fanli.Homepage.add("story18329",function(){var $story18329=$("#J_cd_story18329");var endtime=$story18329.data("time");function setup(){if($story18329.length){init18329();}}
function init18329(){$.getJSON("//fun.fanli.com/topheader/getTime?jsoncallback=?",function(JSON){if(JSON.status==1){timestamp=JSON.data.timestamp;bindCountdown(timestamp);}});}
function bindCountdown(timestamp){if(endtime-timestamp<0)return;$("#J_countdown_story18329").countdown({until:endtime-timestamp,format:'dHMS',layout:'{d<}<em>{dnn}</em>天{d>}<em>{hnn}</em>时<em>{mnn}</em>分<em>{snn}</em>秒',onExpiry:function(){$story18329.hide();}});$story18329.show();}
setup();}).story18329();Fanli.Homepage.add("story17998",function(){$("#J_backtop_fa").sidebar({min:0,relative:true,relativeWidth:1020});}).story17998();})(jQuery);;(function($){$(function(){if((typeof _fanliBacktop!=='undefined')?_fanliBacktop:true){if($.fn.sidebar){$('#backtop').sidebar({min:60,relative:true,relativeWidth:980,backToTop:true,backContainer:'#btn-backtop'});}}
var $footerFa=$('#J-footer-fa');if('footerfa'.getCookie()!=1&&$footerFa.length>0&&$footerFa.css('visibility')!='hidden'&&$.fn.sidebar&&$.fn.adloader){var footerFaClose=true;$footerFa.css({'background':$footerFa.find('img').attr('alt')});if($.fn.sidebar){$footerFa.sidebar({min:0,relative:true,relativeWidth:-990});}
if(footerFaClose){$footerFa.append('<a href="javascript:void(0);" class="close">&times;</a>').on('click','.close',function(){$footerFa.remove();'footerfa'.setCookie('1','0.083',Fanli.Utility.rootDomain,'/');});}}
else{$footerFa.remove();}
function showWebNav(){var $trigger=$('.J_ft_showwebnav');var $panel=$('.J_ft_webnav');if($panel.find('a').length>0){$trigger.click(function()
{if($trigger.hasClass('expand')){$panel.hide();$trigger.removeClass('expand').find('.J_arr').html('&and;');}else{$panel.show();$trigger.addClass('expand').find('.J_arr').html('&or;');}});}
else{$trigger.remove();}}
showWebNav();});FLNS.register("Fanli.Public.Footer");Fanli.Public.Footer.add("InviteEnter",function()
{var $window=$(window);var $enterWrap=$("#J_fl_footer_invite_enter");var cookieName="FL_FOOTER_INVITE_ENTER";var isIE6=!!window.ActiveXObject&&!window.XMLHttpRequest;if($enterWrap.length)
{setup();}
function setup()
{bindLiveEvent();buildIe6Fix();}
function bindLiveEvent()
{if(cookieName.getCookie()!="1")
{$enterWrap.fadeIn("fast");}
$enterWrap.on("click",".J_close_btn",function()
{$enterWrap.fadeOut("fast");cookieName.setCookie("1",1,Fanli.Utility.rootDomain,"/");});}
function buildIe6Fix()
{if(isIE6)
{$enterWrap.css({'position':'absolute','top':$window.scrollTop()+$window.height()-$enterWrap.height()});$window.on('scroll.INVITE',function()
{$enterWrap.css({'position':'absolute','top':$window.scrollTop()+$window.height()-$enterWrap.height()});});}}}).InviteEnter();})(jQuery);;var _hmt=_hmt||[];function Ftrack(base){for(var i=1,length=arguments.length;i<length;i++){_hmt.push(['_trackEvent',base+'_'+arguments[i],'click','']);}
return false;}
(function(){var fanliId='545c20cb01a15219bfeb0d1f103f99c1';var budouId='8b40dd24ee21b28e2c2b108b4f804cb6';var _bdId=document.domain.indexOf('budou.com')>-1?budouId:fanliId;if(typeof(_baidu)!='undefined'){_bdId=_baidu;}
var hm=document.createElement("script");hm.src='//hm.baidu.com/hm.js?'+_bdId;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();;(function(){"use strict";var mbContentUrl=passportAppUrl+"/magicsbar/user/magicsbar";var mbJs="//static2.51fanli.net/static/magicsbar-js.js";var v=Fanli.Utility.staticTimeStamp();var isShow=$('#topbar').data('closemagicsbar')!=1;if(isShow){$.getCacheJSONP("{0}?jsoncallback=?".format(mbContentUrl)).done(function(res){if(!res.status){return;}
var $view=$(res.data).appendTo("body");setTimeout(function(){$.ajax({url:"{0}?v={1}".format(mbJs,v),dataType:"script",cache:true}).done(function(){var mb=new magicsbar();mb.view=$view;mb.setup();});},0);});}}());